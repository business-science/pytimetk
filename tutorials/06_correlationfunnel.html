<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>pytimetk - Correlation Funnel</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../performance/01_speed_comparisons.html" rel="next">
<link href="../tutorials/05_clustering.html" rel="prev">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=330861489"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '330861489', { 'anonymize_ip': true});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-76139189-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76139189-2');
</script>

<!-- SUMO -->
<script src="//load.sumome.com/" data-sumo-site-id="070b24e7e068776f081d1a2a477c11bcfe804d8310bdfd4e44277194b8e41b07" async="async"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.26.0.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>



<meta property="og:title" content="pytimetk - Correlation Funnel">
<meta property="og:description" content="">
<meta property="og:image" content="https://business-science.github.io/pytimetk/guides/correlation_funnel.jpg">
<meta property="og:site-name" content="pytimetk">
<meta name="twitter:title" content="pytimetk - Correlation Funnel">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://business-science.github.io/pytimetk/guides/correlation_funnel.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="https://www.business-science.io/img/business-science-logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">pytimetk</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/business-science/pytimetk" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../tutorials/01_sales_crm.html">üìò Applied Tutorials:</a></li><li class="breadcrumb-item"><a href="../tutorials/06_correlationfunnel.html">Correlation Funnel</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PyTimeTK üìà</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">üèÅ Getting Started:</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting-started/01_installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Install</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting-started/02_quick_start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Start</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">üó∫Ô∏è Beginner Guides:</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/01_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/02_timetk_concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PyTimeTK Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/03_pandas_frequency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pandas Frequencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/04_wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Wrangling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/05_augmenting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Adding Features (Augmenting)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/06_anomalize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anomaly Detection</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">üìò Applied Tutorials:</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/01_sales_crm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sales Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/02_finance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Finance Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/03_demand_forecasting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Demand Forecasting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/04_anomaly_detection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anomaly Detection in Website Traffic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/05_clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/06_correlationfunnel.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Correlation Funnel</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">üèéÔ∏è Performance:</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../performance/01_speed_comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Speed Comparisons</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üìÑ API Reference</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/business-science/pytimetk" class="sidebar-item-text sidebar-link">
 <span class="menu-text">‚≠ê PyTimeTK on Github</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üçª Contributing</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../changelog-news.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üìß Change Log</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">üìö More References:</span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.business-science.io/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Business Science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.quantscience.io/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quant Science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://business-science.github.io/timetk/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Timetk (R Version)</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#heres-what-you-make-in-this-guide" id="toc-heres-what-you-make-in-this-guide" class="nav-link active" data-scroll-target="#heres-what-you-make-in-this-guide"><span class="header-section-number">1</span> Here‚Äôs what you make in this Guide:</a></li>
  <li><a href="#about-correlation-funnel" id="toc-about-correlation-funnel" class="nav-link" data-scroll-target="#about-correlation-funnel"><span class="header-section-number">2</span> About Correlation Funnel</a></li>
  <li><a href="#correlation-funnel-workflow-in-python" id="toc-correlation-funnel-workflow-in-python" class="nav-link" data-scroll-target="#correlation-funnel-workflow-in-python"><span class="header-section-number">3</span> Correlation Funnel Workflow in Python</a>
  <ul class="collapse">
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup"><span class="header-section-number">3.1</span> Setup</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation"><span class="header-section-number">3.2</span> Data Preparation</a></li>
  <li><a href="#step-correlation-funnel-workflow" id="toc-step-correlation-funnel-workflow" class="nav-link" data-scroll-target="#step-correlation-funnel-workflow"><span class="header-section-number">3.3</span> 3-Step Correlation Funnel Workflow</a>
  <ul class="collapse">
  <li><a href="#step-1-binarize" id="toc-step-1-binarize" class="nav-link" data-scroll-target="#step-1-binarize">Step 1: Binarize</a></li>
  <li><a href="#step-2-correlate-the-data" id="toc-step-2-correlate-the-data" class="nav-link" data-scroll-target="#step-2-correlate-the-data">Step 2: Correlate the data</a></li>
  <li><a href="#step-3-plot-the-correlation-funnel" id="toc-step-3-plot-the-correlation-funnel" class="nav-link" data-scroll-target="#step-3-plot-the-correlation-funnel">Step 3: Plot the Correlation funnel</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#business-insights-from-the-correlation-funnel" id="toc-business-insights-from-the-correlation-funnel" class="nav-link" data-scroll-target="#business-insights-from-the-correlation-funnel"><span class="header-section-number">4</span> Business insights from the Correlation Funnel</a></li>
  <li><a href="#business-value-better-decisions" id="toc-business-value-better-decisions" class="nav-link" data-scroll-target="#business-value-better-decisions"><span class="header-section-number">5</span> Business Value (Better Decisions)</a></li>
  <li><a href="#more-coming-soon" id="toc-more-coming-soon" class="nav-link" data-scroll-target="#more-coming-soon"><span class="header-section-number">6</span> More Coming Soon‚Ä¶</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/business-science/pytimetk/edit/main/tutorials/06_correlationfunnel.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/business-science/pytimetk/issues" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Correlation Funnel</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="heres-what-you-make-in-this-guide" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Here‚Äôs what you make in this Guide:</h1>
<p>We will demonstrate how Correlation Funnel to analyze Expedia Hotel Bookings and which features correlate to a customer making a booking through their website:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../guides/correlation_funnel.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Correlation Funnel</figcaption>
</figure>
</div>
</section>
<section id="about-correlation-funnel" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> About Correlation Funnel</h1>
<p>Correlationfunnel is designed for getting quick insights during the exploratory data analysis phase of data science projects. It‚Äôs not specific to time series, although it can help in time series analysis. We‚Äôll see how we can use the correlation funnel workflow to identify the following quick business decisions:</p>
<ul>
<li><p>We can begin to make business decisions like focusing less on packages and increasing advertising on continent ID 2 with trips to high-conversion search destinations.</p></li>
<li><p>These actions will help increase Return on Advertising Spend (ROAS) and Return on Investment (ROI). All from a simple Correlation Funnel Visualization.</p></li>
</ul>
</section>
<section id="correlation-funnel-workflow-in-python" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Correlation Funnel Workflow in Python</h1>
<p>Pytimetk uses the following methods for applying the Correlation Funnel:</p>
<ol type="1">
<li><code>binarize()</code>: Used to convert categorical, string and numeric data to binary 0/1 data.</li>
<li><code>correlate()</code>: Used to correlate all binary features to one of the ‚Äútarget‚Äù binary features.</li>
<li><code>plot_correlation_funnel()</code>: Used to visualize the correlations as a funnel, where the top features typically form a funnel shape.</li>
</ol>
<section id="setup" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="setup"><span class="header-section-number">3.1</span> Setup</h2>
<p>To set up, import the following packages and the <code>expedia_df</code> dataset, Expedia Hotel Time Series Dataset.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytimetk <span class="im">as</span> tk</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>expedia_df <span class="op">=</span> tk.load_dataset(<span class="st">"expedia"</span>, parse_dates <span class="op">=</span> [<span class="st">'date_time'</span>])</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>expedia_df.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 100000 rows of 24 columns
date_time:                  datetime64[ns]    [Timestamp('2013-07-25 17: ...
site_name:                  int64             [2, 2, 2, 2, 2, 37, 2, 2,  ...
posa_continent:             int64             [3, 3, 3, 3, 3, 1, 3, 3, 3 ...
user_location_country:      int64             [66, 66, 66, 66, 66, 69, 6 ...
user_location_region:       int64             [174, 174, 174, 220, 351,  ...
user_location_city:         int64             [35675, 31320, 16292, 1760 ...
orig_destination_distance:  float64           [0.1203, 108.2251, 763.142 ...
user_id:                    int64             [44735, 794319, 761732, 69 ...
is_mobile:                  int64             [0, 0, 1, 0, 0, 0, 0, 0, 0 ...
is_package:                 int64             [0, 0, 0, 0, 0, 0, 0, 0, 0 ...
channel:                    int64             [9, 3, 1, 9, 1, 9, 9, 9, 9 ...
srch_ci:                    object            ['2013-07-26', '2014-11-27 ...
srch_co:                    object            ['2013-07-27', '2014-11-29 ...
srch_adults_cnt:            int64             [1, 2, 2, 2, 2, 2, 2, 2, 2 ...
srch_children_cnt:          int64             [0, 0, 0, 0, 0, 0, 0, 0, 0 ...
srch_rm_cnt:                int64             [1, 1, 1, 1, 1, 1, 1, 1, 1 ...
srch_destination_id:        int64             [5465, 11620, 23808, 40658 ...
srch_destination_type_id:   int64             [3, 1, 6, 5, 1, 6, 1, 5, 6 ...
is_booking:                 int64             [1, 0, 0, 0, 0, 0, 0, 0, 0 ...
cnt:                        int64             [1, 2, 3, 1, 2, 7, 1, 1, 1 ...
hotel_continent:            int64             [2, 2, 2, 2, 2, 6, 4, 2, 4 ...
hotel_country:              int64             [50, 50, 50, 50, 50, 204,  ...
hotel_market:               int64             [1230, 369, 1144, 930, 637 ...
hotel_cluster:              int64             [47, 83, 93, 48, 33, 15, 9 ...</code></pre>
</div>
</div>
</section>
<section id="data-preparation" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="data-preparation"><span class="header-section-number">3.2</span> Data Preparation</h2>
<p>To prepare the dataset, we will first perform data preparation:</p>
<ol type="1">
<li>Add time series features based on the <code>date_time</code> timestamp column.</li>
<li>We will drop any zero variance features</li>
<li>Drop additional columns that are not an acceptable data type (i.e.&nbsp;not numeric, categorical, or string) or contain missing values</li>
<li>Convert numeric columns that start with ‚Äúhotel_‚Äù that are actually categorical ‚ÄúID‚Äù columns to string</li>
</ol>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>expedia_ts_features_df <span class="op">=</span> expedia_df <span class="op">\</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    .augment_timeseries_signature(<span class="st">'date_time'</span>) <span class="op">\</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    .drop_zero_variance() <span class="op">\</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    .drop(columns<span class="op">=</span>[<span class="st">'date_time'</span>, <span class="st">'orig_destination_distance'</span>, <span class="st">'srch_ci'</span>, <span class="st">'srch_co'</span>]) <span class="op">\</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    .transform_columns(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        columns <span class="op">=</span> [<span class="vs">r"hotel_.*"</span>],</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        transform_func <span class="op">=</span> <span class="kw">lambda</span> x: x.astype(<span class="bu">str</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>expedia_ts_features_df.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 100000 rows of 46 columns
site_name:                 int64             [2, 2, 2, 2, 2, 37, 2, 2, 2 ...
posa_continent:            int64             [3, 3, 3, 3, 3, 1, 3, 3, 3, ...
user_location_country:     int64             [66, 66, 66, 66, 66, 69, 66 ...
user_location_region:      int64             [174, 174, 174, 220, 351, 7 ...
user_location_city:        int64             [35675, 31320, 16292, 17605 ...
user_id:                   int64             [44735, 794319, 761732, 696 ...
is_mobile:                 int64             [0, 0, 1, 0, 0, 0, 0, 0, 0, ...
is_package:                int64             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
channel:                   int64             [9, 3, 1, 9, 1, 9, 9, 9, 9, ...
srch_adults_cnt:           int64             [1, 2, 2, 2, 2, 2, 2, 2, 2, ...
srch_children_cnt:         int64             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
srch_rm_cnt:               int64             [1, 1, 1, 1, 1, 1, 1, 1, 1, ...
srch_destination_id:       int64             [5465, 11620, 23808, 40658, ...
srch_destination_type_id:  int64             [3, 1, 6, 5, 1, 6, 1, 5, 6, ...
is_booking:                int64             [1, 0, 0, 0, 0, 0, 0, 0, 0, ...
cnt:                       int64             [1, 2, 3, 1, 2, 7, 1, 1, 1, ...
hotel_continent:           object            ['2', '2', '2', '2', '2', ' ...
hotel_country:             object            ['50', '50', '50', '50', '5 ...
hotel_market:              object            ['1230', '369', '1144', '93 ...
hotel_cluster:             object            ['47', '83', '93', '48', '3 ...
date_time_index_num:       int64             [1374773055, 1414939784, 14 ...
date_time_year:            int64             [2013, 2014, 2014, 2014, 20 ...
date_time_year_iso:        UInt32            [2013, 2014, 2014, 2014, 20 ...
date_time_yearstart:       uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
date_time_yearend:         uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
date_time_half:            int64             [2, 2, 1, 1, 2, 2, 1, 2, 1, ...
date_time_quarter:         int64             [3, 4, 2, 1, 3, 4, 1, 3, 2, ...
date_time_quarteryear:     object            ['2013Q3', '2014Q4', '2014Q ...
date_time_quarterstart:    uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
date_time_quarterend:      uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
date_time_month:           int64             [7, 11, 5, 2, 8, 12, 3, 9,  ...
date_time_month_lbl:       object            ['July', 'November', 'May', ...
date_time_monthstart:      uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
date_time_monthend:        uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0, ...
date_time_yweek:           UInt32            [30, 44, 21, 9, 33, 50, 12, ...
date_time_mweek:           int64             [4, 1, 4, 4, 2, 2, 3, 3, 2, ...
date_time_wday:            int64             [4, 7, 4, 3, 3, 2, 2, 1, 4, ...
date_time_wday_lbl:        object            ['Thursday', 'Sunday', 'Thu ...
date_time_mday:            int64             [25, 2, 22, 26, 13, 9, 18,  ...
date_time_qday:            int64             [25, 33, 52, 57, 44, 70, 77 ...
date_time_yday:            int64             [206, 306, 142, 57, 225, 34 ...
date_time_weekend:         int64             [0, 1, 0, 0, 0, 0, 0, 0, 0, ...
date_time_hour:            int64             [17, 14, 12, 14, 11, 7, 21, ...
date_time_minute:          int64             [24, 49, 50, 1, 15, 21, 40, ...
date_time_second:          int64             [15, 44, 53, 2, 40, 31, 29, ...
date_time_am_pm:           object            ['pm', 'pm', 'am', 'pm', 'a ...</code></pre>
</div>
</div>
</section>
<section id="step-correlation-funnel-workflow" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="step-correlation-funnel-workflow"><span class="header-section-number">3.3</span> 3-Step Correlation Funnel Workflow</h2>
<p>Next, we will perform the Correlation Funnel workflow to explore the Expedia Hotel Time Series dataset. There are 3 steps:</p>
<ol type="1">
<li><em>Binarize:</em> Convert the data to binary 0/1</li>
<li><em>Correlate:</em> Detect relationships between the binary features and one of the columns (called the target)</li>
<li><em>Visualize the Correlation Funnel:</em> Plotting allows us to assess the top features and their relationship to the target.</li>
</ol>
<section id="step-1-binarize" class="level3">
<h3 class="anchored" data-anchor-id="step-1-binarize">Step 1: Binarize</h3>
<p>Use <code>binarize()</code> to convert the raw data to binary 0/1. Binarization happens as follows:</p>
<ol type="1">
<li><p><em>Numeric Data:</em> Numeric data is Quantile Binned using the <code>pd.qcut()</code> function. The default is 4 bins, which bins numeric data into a maximum of 4 discrete bins. Fewer bins can be returned if there is insufficient data for 4 bins. The number of bins is controlled with the <code>n_bins</code> parameter.</p></li>
<li><p><em>Categorical / String Data:</em> Categorical data is first processed to determine the most frequent categories. Categories that are sparse are lumped into an ‚ÄúOTHER‚Äù category. The lumping can be controlled with the <code>thresh_infreq</code>.</p></li>
</ol>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>expedia_ts_binarized_df <span class="op">=</span> expedia_ts_features_df.binarize(thresh_infreq <span class="op">=</span> <span class="fl">0.05</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>expedia_ts_binarized_df.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 100000 rows of 155 columns
site_name__2.0_15.0:                             uint8             [1, 1 ...
site_name__15.0_53.0:                            uint8             [0, 0 ...
user_location_country__0.0_66.0:                 uint8             [1, 1 ...
user_location_country__66.0_71.0:                uint8             [0, 0 ...
user_location_country__71.0_239.0:               uint8             [0, 0 ...
user_location_region__0.0_174.0:                 uint8             [1, 1 ...
user_location_region__174.0_314.0:               uint8             [0, 0 ...
user_location_region__314.0_385.0:               uint8             [0, 0 ...
user_location_region__385.0_1021.0:              uint8             [0, 0 ...
user_location_city__0.0_13087.0:                 uint8             [0, 0 ...
user_location_city__13087.0_27655.0:             uint8             [0, 0 ...
user_location_city__27655.0_42563.0:             uint8             [1, 1 ...
user_location_city__42563.0_56507.0:             uint8             [0, 0 ...
user_id__13.0_299759.8:                          uint8             [1, 0 ...
user_id__299759.8_605161.5:                      uint8             [0, 0 ...
user_id__605161.5_911811.5:                      uint8             [0, 1 ...
user_id__911811.5_1198780.0:                     uint8             [0, 0 ...
channel__0.0_2.0:                                uint8             [0, 0 ...
channel__2.0_9.0:                                uint8             [1, 1 ...
channel__9.0_10.0:                               uint8             [0, 0 ...
srch_adults_cnt__0.0_2.0:                        uint8             [1, 1 ...
srch_adults_cnt__2.0_9.0:                        uint8             [0, 0 ...
srch_children_cnt__0.0_9.0:                      uint8             [1, 1 ...
srch_rm_cnt__0.0_1.0:                            uint8             [1, 1 ...
srch_rm_cnt__1.0_8.0:                            uint8             [0, 0 ...
srch_destination_id__1.0_8267.0:                 uint8             [1, 0 ...
srch_destination_id__8267.0_9147.0:              uint8             [0, 0 ...
srch_destination_id__9147.0_18998.0:             uint8             [0, 1 ...
srch_destination_id__18998.0_65104.0:            uint8             [0, 0 ...
srch_destination_type_id__1.0_5.0:               uint8             [1, 1 ...
srch_destination_type_id__5.0_9.0:               uint8             [0, 0 ...
cnt__1.0_2.0:                                    uint8             [1, 1 ...
cnt__2.0_72.0:                                   uint8             [0, 0 ...
date_time_index_num__1357516842.0_1382867237.5:  uint8             [1, 0 ...
date_time_index_num__1382867237.5_1401387689.0:  uint8             [0, 0 ...
date_time_index_num__1401387689.0_1410981206.0:  uint8             [0, 0 ...
date_time_index_num__1410981206.0_1420070302.0:  uint8             [0, 1 ...
date_time_month__1.0_5.0:                        uint8             [0, 0 ...
date_time_month__5.0_7.0:                        uint8             [1, 0 ...
date_time_month__7.0_10.0:                       uint8             [0, 0 ...
date_time_month__10.0_12.0:                      uint8             [0, 1 ...
date_time_yweek__1.0_17.0:                       uint8             [0, 0 ...
date_time_yweek__17.0_30.0:                      uint8             [1, 0 ...
date_time_yweek__30.0_41.0:                      uint8             [0, 0 ...
date_time_yweek__41.0_52.0:                      uint8             [0, 1 ...
date_time_mday__1.0_8.0:                         uint8             [0, 1 ...
date_time_mday__8.0_16.0:                        uint8             [0, 0 ...
date_time_mday__16.0_23.0:                       uint8             [0, 0 ...
date_time_mday__23.0_31.0:                       uint8             [1, 0 ...
date_time_qday__1.0_24.0:                        uint8             [0, 0 ...
date_time_qday__24.0_48.0:                       uint8             [1, 1 ...
date_time_qday__48.0_70.0:                       uint8             [0, 0 ...
date_time_qday__70.0_92.0:                       uint8             [0, 0 ...
date_time_yday__1.0_121.0:                       uint8             [0, 0 ...
date_time_yday__121.0_209.0:                     uint8             [1, 0 ...
date_time_yday__209.0_286.0:                     uint8             [0, 0 ...
date_time_yday__286.0_365.0:                     uint8             [0, 1 ...
date_time_hour__0.0_10.0:                        uint8             [0, 0 ...
date_time_hour__10.0_14.0:                       uint8             [0, 1 ...
date_time_hour__14.0_18.0:                       uint8             [1, 0 ...
date_time_hour__18.0_23.0:                       uint8             [0, 0 ...
date_time_minute__0.0_15.0:                      uint8             [0, 0 ...
date_time_minute__15.0_30.0:                     uint8             [1, 0 ...
date_time_minute__30.0_45.0:                     uint8             [0, 0 ...
date_time_minute__45.0_59.0:                     uint8             [0, 1 ...
date_time_second__0.0_15.0:                      uint8             [1, 0 ...
date_time_second__15.0_30.0:                     uint8             [0, 0 ...
date_time_second__30.0_45.0:                     uint8             [0, 1 ...
date_time_second__45.0_59.0:                     uint8             [0, 0 ...
posa_continent__1:                               uint8             [0, 0 ...
posa_continent__2:                               uint8             [0, 0 ...
posa_continent__3:                               uint8             [1, 1 ...
posa_continent__-OTHER:                          uint8             [0, 0 ...
is_mobile__0:                                    uint8             [1, 1 ...
is_mobile__1:                                    uint8             [0, 0 ...
is_package__0:                                   uint8             [1, 1 ...
is_package__1:                                   uint8             [0, 0 ...
is_booking__0:                                   uint8             [0, 1 ...
is_booking__1:                                   uint8             [1, 0 ...
hotel_continent__-OTHER:                         uint8             [0, 0 ...
hotel_continent__2:                              uint8             [1, 1 ...
hotel_continent__3:                              uint8             [0, 0 ...
hotel_continent__4:                              uint8             [0, 0 ...
hotel_continent__6:                              uint8             [0, 0 ...
hotel_country__-OTHER:                           uint8             [0, 0 ...
hotel_country__50:                               uint8             [1, 1 ...
hotel_country__8:                                uint8             [0, 0 ...
hotel_market__-OTHER:                            uint8             [1, 1 ...
hotel_cluster__-OTHER:                           uint8             [1, 1 ...
date_time_year__2013:                            uint8             [1, 0 ...
date_time_year__2014:                            uint8             [0, 1 ...
date_time_year_iso__2013:                        uint8             [1, 0 ...
date_time_year_iso__2014:                        uint8             [0, 1 ...
date_time_year_iso__-OTHER:                      uint8             [0, 0 ...
date_time_yearstart__0:                          uint8             [1, 1 ...
date_time_yearstart__-OTHER:                     uint8             [0, 0 ...
date_time_yearend__0:                            uint8             [1, 1 ...
date_time_yearend__-OTHER:                       uint8             [0, 0 ...
date_time_half__1:                               uint8             [0, 0 ...
date_time_half__2:                               uint8             [1, 1 ...
date_time_quarter__1:                            uint8             [0, 0 ...
date_time_quarter__2:                            uint8             [0, 0 ...
date_time_quarter__3:                            uint8             [1, 0 ...
date_time_quarter__4:                            uint8             [0, 1 ...
date_time_quarteryear__2013Q1:                   uint8             [0, 0 ...
date_time_quarteryear__2013Q2:                   uint8             [0, 0 ...
date_time_quarteryear__2013Q3:                   uint8             [1, 0 ...
date_time_quarteryear__2013Q4:                   uint8             [0, 0 ...
date_time_quarteryear__2014Q1:                   uint8             [0, 0 ...
date_time_quarteryear__2014Q2:                   uint8             [0, 0 ...
date_time_quarteryear__2014Q3:                   uint8             [0, 0 ...
date_time_quarteryear__2014Q4:                   uint8             [0, 1 ...
date_time_quarterstart__0:                       uint8             [1, 1 ...
date_time_quarterstart__-OTHER:                  uint8             [0, 0 ...
date_time_quarterend__0:                         uint8             [1, 1 ...
date_time_quarterend__-OTHER:                    uint8             [0, 0 ...
date_time_month_lbl__April:                      uint8             [0, 0 ...
date_time_month_lbl__August:                     uint8             [0, 0 ...
date_time_month_lbl__December:                   uint8             [0, 0 ...
date_time_month_lbl__February:                   uint8             [0, 0 ...
date_time_month_lbl__January:                    uint8             [0, 0 ...
date_time_month_lbl__July:                       uint8             [1, 0 ...
date_time_month_lbl__June:                       uint8             [0, 0 ...
date_time_month_lbl__March:                      uint8             [0, 0 ...
date_time_month_lbl__May:                        uint8             [0, 0 ...
date_time_month_lbl__November:                   uint8             [0, 1 ...
date_time_month_lbl__October:                    uint8             [0, 0 ...
date_time_month_lbl__September:                  uint8             [0, 0 ...
date_time_monthstart__0:                         uint8             [1, 1 ...
date_time_monthstart__-OTHER:                    uint8             [0, 0 ...
date_time_monthend__0:                           uint8             [1, 1 ...
date_time_monthend__-OTHER:                      uint8             [0, 0 ...
date_time_mweek__1:                              uint8             [0, 1 ...
date_time_mweek__2:                              uint8             [0, 0 ...
date_time_mweek__3:                              uint8             [0, 0 ...
date_time_mweek__4:                              uint8             [1, 0 ...
date_time_mweek__5:                              uint8             [0, 0 ...
date_time_wday__1:                               uint8             [0, 0 ...
date_time_wday__2:                               uint8             [0, 0 ...
date_time_wday__3:                               uint8             [0, 0 ...
date_time_wday__4:                               uint8             [1, 0 ...
date_time_wday__5:                               uint8             [0, 0 ...
date_time_wday__6:                               uint8             [0, 0 ...
date_time_wday__7:                               uint8             [0, 1 ...
date_time_wday_lbl__Friday:                      uint8             [0, 0 ...
date_time_wday_lbl__Monday:                      uint8             [0, 0 ...
date_time_wday_lbl__Saturday:                    uint8             [0, 0 ...
date_time_wday_lbl__Sunday:                      uint8             [0, 1 ...
date_time_wday_lbl__Thursday:                    uint8             [1, 0 ...
date_time_wday_lbl__Tuesday:                     uint8             [0, 0 ...
date_time_wday_lbl__Wednesday:                   uint8             [0, 0 ...
date_time_weekend__0:                            uint8             [1, 0 ...
date_time_weekend__1:                            uint8             [0, 1 ...
date_time_am_pm__am:                             uint8             [0, 0 ...
date_time_am_pm__pm:                             uint8             [1, 1 ...</code></pre>
</div>
</div>
</section>
<section id="step-2-correlate-the-data" class="level3">
<h3 class="anchored" data-anchor-id="step-2-correlate-the-data">Step 2: Correlate the data</h3>
<p>Next, we use <code>correlate()</code> to calculate strength of the relationship. The main parameter is <code>target</code>, which should be selected based on the business goal.</p>
<p>In this case, we can create a business goal to understand what relates to a website visit count greater than 2. We will select the column: <code>is_booking__1</code> as the target. This is because we want to know what relates to a hotel room booking via the website search data.</p>
<p>This returns a 3 column data frame containing:</p>
<ol type="1">
<li><em>feature:</em> The name of the features</li>
<li><em>bin:</em> The bin that corresponds to a bin inside the features</li>
<li><em>correlation:</em> The strength of the relationship (0 to 1) and the direction of the relationship (+/-)</li>
</ol>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>expedia_ts_correlate_df <span class="op">=</span> expedia_ts_binarized_df.correlate(<span class="st">'is_booking__1'</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>expedia_ts_correlate_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">feature</th>
<th data-quarto-table-cell-role="th">bin</th>
<th data-quarto-table-cell-role="th">correlation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">77</td>
<td>is_booking</td>
<td>0</td>
<td>-1.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">78</td>
<td>is_booking</td>
<td>1</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>cnt</td>
<td>2.0_72.0</td>
<td>-0.099372</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>cnt</td>
<td>1.0_2.0</td>
<td>0.099372</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75</td>
<td>is_package</td>
<td>0</td>
<td>0.075930</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">131</td>
<td>date_time_monthend</td>
<td>-OTHER</td>
<td>0.000182</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">108</td>
<td>date_time_quarteryear</td>
<td>2014Q1</td>
<td>-0.000041</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>srch_children_cnt</td>
<td>0.0_9.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">87</td>
<td>hotel_market</td>
<td>-OTHER</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">88</td>
<td>hotel_cluster</td>
<td>-OTHER</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>155 rows √ó 3 columns</p>
</div>
</div>
</div>
</section>
<section id="step-3-plot-the-correlation-funnel" class="level3">
<h3 class="anchored" data-anchor-id="step-3-plot-the-correlation-funnel">Step 3: Plot the Correlation funnel</h3>
<p>It‚Äôs in this step where we can visualize review the correlations and determine which features relate to the target, the strength of the relationship (magnitude between 0 and 1), and the direction of the relationship (+/-).</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>expedia_ts_correlate_df.plot_correlation_funnel(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    engine <span class="op">=</span> <span class="st">'plotly'</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    height <span class="op">=</span> <span class="dv">800</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="9e7cd316-0168-428f-969c-7be7390f10e8" class="plotly-graph-div" style="height:800px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("9e7cd316-0168-428f-969c-7be7390f10e8")) {                    Plotly.newPlot(                        "9e7cd316-0168-428f-969c-7be7390f10e8",                        [{"customdata":[["0"],["1"],["2.0_72.0"],["1.0_2.0"],["0"],["1"],["2"],["4"],["18998.0_65104.0"],["50"],["8267.0_9147.0"],["2013"],["2013"],["2014"],["8"],["2014"],["0"],["1"],["1357516842.0_1382867237.5"],["5.0_9.0"],["1.0_5.0"],["2.0_9.0"],["0.0_2.0"],["3"],["2"],["-OTHER"],["3"],["1410981206.0_1420070302.0"],["18.0_23.0"],["2013Q4"],["1401387689.0_1410981206.0"],["2014Q3"],["2014Q4"],["1.0_5.0"],["2013Q2"],["2.0_15.0"],["15.0_53.0"],["2"],["1"],["am"],["pm"],["0.0_1.0"],["1.0_8.0"],["May"],["0.0_2.0"],["2.0_9.0"],["2013Q1"],["Friday"],["5"],["0"],["7"],["Sunday"],["1"],["1.0_121.0"],["1382867237.5_1401387689.0"],["3"],["2"],["385.0_1021.0"],["0.0_174.0"],["2013Q3"],["0.0_10.0"],["-OTHER"],["1"],["10.0_14.0"],["January"],["1.0_17.0"],["45.0_59.0"],["August"],["December"],["February"],["10.0_12.0"],["286.0_365.0"],["209.0_286.0"],["70.0_92.0"],["30.0_41.0"],["6"],["1"],["7.0_10.0"],["5.0_7.0"],["July"],["16.0_23.0"],["4"],["9147.0_18998.0"],["299759.8_605161.5"],["41.0_52.0"],["Saturday"],["6"],["-OTHER"],["April"],["4"],["Thursday"],["24.0_48.0"],["17.0_30.0"],["0.0_13087.0"],["15.0_30.0"],["2"],["4"],["1.0_8.0"],["9.0_10.0"],["3"],["911811.5_1198780.0"],["September"],["0.0_15.0"],["0"],["-OTHER"],["0.0_66.0"],["1.0_8267.0"],["13087.0_27655.0"],["1"],["121.0_209.0"],["45.0_59.0"],["8.0_16.0"],["13.0_299759.8"],["November"],["June"],["71.0_239.0"],["66.0_71.0"],["27655.0_42563.0"],["0.0_15.0"],["15.0_30.0"],["314.0_385.0"],["48.0_70.0"],["Wednesday"],["3"],["-OTHER"],["0"],["-OTHER"],["-OTHER"],["0"],["1.0_24.0"],["30.0_45.0"],["2"],["Tuesday"],["605161.5_911811.5"],["5"],["0"],["-OTHER"],["1"],["Monday"],["March"],["174.0_314.0"],["14.0_18.0"],["October"],["0"],["-OTHER"],["23.0_31.0"],["42563.0_56507.0"],["30.0_45.0"],["2014Q2"],["0"],["-OTHER"],["2014Q1"],["0.0_9.0"],["-OTHER"],["-OTHER"]],"hovertemplate":"correlation=%{x:.3f}\u003cbr\u003efeature=%{y}\u003cbr\u003ebin=%{customdata[0]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":"#2c3e50","symbol":"circle","opacity":1.0},"mode":"markers","name":"","orientation":"h","showlegend":false,"x":[-1.0,1.0,-0.09937211955915354,0.09937211955915354,0.07593025914952085,-0.07593025914952085,0.050097516461707195,-0.044462426552257184,0.04125894144815048,0.039424681196877684,-0.039378132179473814,0.03509503884797872,0.0347565033104854,-0.03475650331048525,-0.03463390090025041,-0.033700867747505504,0.03148589403757155,-0.03148589403757155,0.028348703939032018,0.026923993398329633,-0.0269239933983296,0.026875222229868517,-0.026777788538026374,0.02598915363794887,-0.024850973818382204,-0.02412704014193169,-0.022748739344851474,-0.02049433176515959,-0.01960972802307873,0.01959908216851543,-0.019378410035538345,-0.019363487874862435,-0.018824224972417133,0.0185588861900607,0.017686059595154208,0.016914202354436955,-0.016914202354436927,-0.016468373141523246,0.016468373141523246,0.015490674374067358,-0.015490674374067325,-0.014633463331644517,0.014633463331644486,0.01445712730676836,0.014331172148091697,-0.014331172148091697,0.0136249108276263,0.013109352786570484,0.013109352786570484,0.012762953048714555,-0.012762953048714547,-0.012762953048714547,-0.012762953048714547,0.012083777905866558,0.0115240378616655,-0.011518984718221641,0.011041576250149383,0.010928496626104076,-0.010873263783986842,0.00996441552808259,0.009706008276848312,-0.009104113632839042,0.008995965643428104,0.00869963604247588,0.00868428568404972,0.008531737067894608,-0.00786192966105466,-0.007612395894979799,-0.007518173112343602,0.007424362593532008,-0.007411391521718028,-0.007375243849568844,-0.007325864389960084,-0.007303264148519696,-0.007240150738176653,-0.007214865377108751,-0.006960136789392835,-0.00682809684757067,-0.006804131727680412,-0.0067928761365037265,-0.006283150719391666,-0.0062041910763869345,-0.006124885690899986,0.006116109479654872,-0.005946867495384392,-0.005932522666708818,-0.005932522666708818,-0.005574299269700386,0.005511905281924328,0.005302001416716402,0.005302001416716402,0.004574344605006709,0.004518043763429326,-0.004517801505716054,0.004346565777223215,0.004109668689502873,-0.0039130893388275,0.0037671071787218316,-0.003693447627437826,-0.003273196149803746,-0.003154624889506286,-0.0030976756700580367,0.003060744473143994,0.002982077818471378,-0.00298207781847135,0.0029768926334541785,0.0028200086455744786,0.0027926101633556064,0.0026780970112458263,0.002580831573709748,0.002534489803064178,0.0025332582767091244,-0.0022962235590284095,-0.002288512671615055,-0.002120261481025467,-0.0020480554882216966,-0.0019954208137611764,0.001957989905703855,-0.0017462552418750627,-0.0015475274083076047,0.001498866523913769,0.0014459485494123276,-0.00141869979196342,-0.00141869979196342,-0.0013340574036761472,0.001334057403676012,-0.001319794647943865,-0.001268317888208409,0.0012683178882083837,0.0012622893236450801,0.0008284647234098237,0.0006974261673593893,0.0006974261673593893,-0.0006652610311204316,0.0006624782287211185,-0.0005902080142589684,0.0005902080142589507,0.0005884993655623984,0.0005884993655623984,-0.0005499484672690319,-0.0005466927055377349,0.00041308342411376534,0.0003353039455150893,-0.00026321309562363736,0.00026321309562355794,-0.00025776269588751886,-0.00023250998762039822,0.00022146382298094013,-0.00019308932565764752,-0.0001823360588050472,0.00018233605880500688,-4.0716986709428215e-05,null,null,null],"xaxis":"x","y":["is_booking","is_booking","cnt","cnt","is_package","is_package","hotel_continent","hotel_continent","srch_destination_id","hotel_country","srch_destination_id","date_time_year_iso","date_time_year","date_time_year","hotel_country","date_time_year_iso","is_mobile","is_mobile","date_time_index_num","srch_destination_type_id","srch_destination_type_id","channel","channel","posa_continent","posa_continent","hotel_country","hotel_continent","date_time_index_num","date_time_hour","date_time_quarteryear","date_time_index_num","date_time_quarteryear","date_time_quarteryear","date_time_month","date_time_quarteryear","site_name","site_name","date_time_half","date_time_half","date_time_am_pm","date_time_am_pm","srch_rm_cnt","srch_rm_cnt","date_time_month_lbl","srch_adults_cnt","srch_adults_cnt","date_time_quarteryear","date_time_wday_lbl","date_time_wday","date_time_weekend","date_time_wday","date_time_wday_lbl","date_time_weekend","date_time_yday","date_time_index_num","date_time_quarter","date_time_quarter","user_location_region","user_location_region","date_time_quarteryear","date_time_hour","posa_continent","date_time_quarter","date_time_hour","date_time_month_lbl","date_time_yweek","date_time_second","date_time_month_lbl","date_time_month_lbl","date_time_month_lbl","date_time_month","date_time_yday","date_time_yday","date_time_qday","date_time_yweek","hotel_continent","posa_continent","date_time_month","date_time_month","date_time_month_lbl","date_time_mday","date_time_quarter","srch_destination_id","user_id","date_time_yweek","date_time_wday_lbl","date_time_wday","date_time_year_iso","date_time_month_lbl","date_time_wday","date_time_wday_lbl","date_time_qday","date_time_yweek","user_location_city","date_time_second","date_time_mweek","date_time_mweek","date_time_mday","channel","date_time_mweek","user_id","date_time_month_lbl","date_time_second","date_time_quarterend","date_time_quarterend","user_location_country","srch_destination_id","user_location_city","date_time_mweek","date_time_yday","date_time_minute","date_time_mday","user_id","date_time_month_lbl","date_time_month_lbl","user_location_country","user_location_country","user_location_city","date_time_minute","date_time_minute","user_location_region","date_time_qday","date_time_wday_lbl","date_time_wday","date_time_yearend","date_time_yearend","hotel_continent","date_time_quarterstart","date_time_quarterstart","date_time_qday","date_time_minute","date_time_wday","date_time_wday_lbl","user_id","date_time_mweek","date_time_yearstart","date_time_yearstart","date_time_wday","date_time_wday_lbl","date_time_month_lbl","user_location_region","date_time_hour","date_time_month_lbl","date_time_monthstart","date_time_monthstart","date_time_mday","user_location_city","date_time_second","date_time_quarteryear","date_time_monthend","date_time_monthend","date_time_quarteryear","srch_children_cnt","hotel_market","hotel_cluster"],"yaxis":"y","type":"scatter","hoverlabel":{"font":{"size":8.8}},"text":["0","1","2.0_72.0","1.0_2.0","0","1","2","4","18998.0_65104.0","50","8267.0_9147.0","2013","2013","2014","8","2014","0","1","1357516842.0_1382867237.5","5.0_9.0","1.0_5.0","2.0_9.0","0.0_2.0","3","2","-OTHER","3","1410981206.0_1420070302.0","18.0_23.0","2013Q4","1401387689.0_1410981206.0","2014Q3","2014Q4","1.0_5.0","2013Q2","2.0_15.0","15.0_53.0","2","1","am","pm","0.0_1.0","1.0_8.0","May","0.0_2.0","2.0_9.0","2013Q1","Friday","5","0","7","Sunday","1","1.0_121.0","1382867237.5_1401387689.0","3","2","385.0_1021.0","0.0_174.0","2013Q3","0.0_10.0","-OTHER","1","10.0_14.0","January","1.0_17.0","45.0_59.0","August","December","February","10.0_12.0","286.0_365.0","209.0_286.0","70.0_92.0","30.0_41.0","6","1","7.0_10.0","5.0_7.0","July","16.0_23.0","4","9147.0_18998.0","299759.8_605161.5","41.0_52.0","Saturday","6","-OTHER","April","4","Thursday","24.0_48.0","17.0_30.0","0.0_13087.0","15.0_30.0","2","4","1.0_8.0","9.0_10.0","3","911811.5_1198780.0","September","0.0_15.0","0","-OTHER","0.0_66.0","1.0_8267.0","13087.0_27655.0","1","121.0_209.0","45.0_59.0","8.0_16.0","13.0_299759.8","November","June","71.0_239.0","66.0_71.0","27655.0_42563.0","0.0_15.0","15.0_30.0","314.0_385.0","48.0_70.0","Wednesday","3","-OTHER","0","-OTHER","-OTHER","0","1.0_24.0","30.0_45.0","2","Tuesday","605161.5_911811.5","5","0","-OTHER","1","Monday","March","174.0_314.0","14.0_18.0","October","0","-OTHER","23.0_31.0","42563.0_56507.0","30.0_45.0","2014Q2","0","-OTHER","2014Q1","0.0_9.0","-OTHER","-OTHER"]}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Correlation"},"range":[-1,1],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Feature"},"tickfont":{"size":8.8},"autorange":"reversed"},"legend":{"tracegroupgap":0,"title":{"font":{"size":8.8}},"font":{"size":8.8}},"title":{"text":"Correlation Funnel Plot","font":{"size":13.2}},"margin":{"l":10,"r":10,"t":40,"b":40},"font":{"size":11},"autosize":true,"height":800,"showlegend":false},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('9e7cd316-0168-428f-969c-7be7390f10e8');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
</section>
</section>
<section id="business-insights-from-the-correlation-funnel" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Business insights from the Correlation Funnel</h1>
<p>Within just a few lines of code, we can quickly assess the business insights. We see:</p>
<ol type="1">
<li><p>Count of website visits seems counterintuitive: Lower counts are more likely to convert to a booking.</p></li>
<li><p>Is package is also counterintuitive. Bundled hotel packages seem to convert less than non-bundled packages.</p></li>
<li><p>Hotel continent ID = 2 has a higher conversion rate than other hotel contients</p></li>
<li><p>Search destination and destination types appear to have higher booking conversions.</p></li>
</ol>
</section>
<section id="business-value-better-decisions" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Business Value (Better Decisions)</h1>
<p>From these insights we can begin to make business decisions like focusing less on packages and increasing advertising on continent ID 2 with trips to high-conversion search destinations. These actions should help increase Return on advertising spend (ROAS) and Return on Investment (ROI). All from a simple Correlation Funnel Visualization.</p>
</section>
<section id="more-coming-soon" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> More Coming Soon‚Ä¶</h1>
<p>We are in the early stages of development. But it‚Äôs obvious the potential for <code>pytimetk</code> now in Python. üêç</p>
<ul>
<li>Please <a href="https://github.com/business-science/pytimetk">‚≠ê us on GitHub</a> (it takes 2-seconds and means a lot).</li>
<li>To make requests, please see our <a href="https://github.com/business-science/pytimetk/issues/2">Project Roadmap GH Issue #2</a>. You can make requests there.</li>
<li>Want to contribute? <a href="../contributing.html">See our contributing guide here.</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../tutorials/05_clustering.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Clustering</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../performance/01_speed_comparisons.html" class="pagination-link">
        <span class="nav-page-text">Speed Comparisons</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>