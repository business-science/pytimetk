<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>pytimetk - Sales Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../tutorials/02_finance.html" rel="next">
<link href="../guides/06_anomalize.html" rel="prev">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=330861489"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '330861489', { 'anonymize_ip': true});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-76139189-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-76139189-2');
</script>

<!-- SUMO -->
<script src="//load.sumome.com/" data-sumo-site-id="070b24e7e068776f081d1a2a477c11bcfe804d8310bdfd4e44277194b8e41b07" async="async"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.26.0.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>

<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>


<meta property="og:title" content="pytimetk - Sales Analysis">
<meta property="og:description" content="">
<meta property="og:image" content="https://business-science.github.io/pytimetk/tutorials/01_sales_crm_files/figure-html/cell-8-output-1.png">
<meta property="og:site-name" content="pytimetk">
<meta property="og:image:height" content="1600">
<meta property="og:image:width" content="2000">
<meta name="twitter:title" content="pytimetk - Sales Analysis">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://business-science.github.io/pytimetk/tutorials/01_sales_crm_files/figure-html/cell-8-output-1.png">
<meta name="twitter:image-height" content="1600">
<meta name="twitter:image-width" content="2000">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="https://www.business-science.io/img/business-science-logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">pytimetk</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/business-science/pytimetk" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../tutorials/01_sales_crm.html">📘 Applied Tutorials:</a></li><li class="breadcrumb-item"><a href="../tutorials/01_sales_crm.html">Sales Analysis</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PyTimeTK 📈</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">🏁 Getting Started:</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting-started/01_installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Install</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting-started/02_quick_start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Start</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">🗺️ Beginner Guides:</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/01_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/02_timetk_concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PyTimeTK Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/03_pandas_frequency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pandas Frequencies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/04_wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Wrangling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/05_augmenting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Adding Features (Augmenting)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../guides/06_anomalize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anomaly Detection</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">📘 Applied Tutorials:</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/01_sales_crm.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Sales Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/02_finance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Finance Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/03_demand_forecasting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Demand Forecasting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/04_anomaly_detection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anomaly Detection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/05_clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">🏎️ Performance:</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../performance/01_speed_comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Speed Comparisons</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">📄 API Reference</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/business-science/pytimetk" class="sidebar-item-text sidebar-link">
 <span class="menu-text">⭐ PyTimeTK on Github</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">🍻 Contributing</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../changelog-news.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">📧 Change Log</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">📚 More References:</span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.business-science.io/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Business Science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.quantscience.io/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quant Science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://business-science.github.io/timetk/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Timetk (R Version)</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tutorial-setup" id="toc-tutorial-setup" class="nav-link active" data-scroll-target="#tutorial-setup"><span class="header-section-number">1</span> Tutorial Setup</a>
  <ul class="collapse">
  <li><a href="#load-packages." id="toc-load-packages." class="nav-link" data-scroll-target="#load-packages."><span class="header-section-number">1.1</span> Load Packages.</a></li>
  <li><a href="#load-inspect-dataset" id="toc-load-inspect-dataset" class="nav-link" data-scroll-target="#load-inspect-dataset"><span class="header-section-number">1.2</span> Load &amp; inspect dataset</a></li>
  </ul></li>
  <li><a href="#exploratory-analysis" id="toc-exploratory-analysis" class="nav-link" data-scroll-target="#exploratory-analysis"><span class="header-section-number">2</span> Exploratory Analysis</a>
  <ul class="collapse">
  <li><a href="#initial-inspection-with-tk.glimpse" id="toc-initial-inspection-with-tk.glimpse" class="nav-link" data-scroll-target="#initial-inspection-with-tk.glimpse"><span class="header-section-number">2.1</span> Initial Inspection with <code>tk.glimpse</code></a></li>
  <li><a href="#data-exploration-with-tk.summarize_by_time" id="toc-data-exploration-with-tk.summarize_by_time" class="nav-link" data-scroll-target="#data-exploration-with-tk.summarize_by_time"><span class="header-section-number">2.2</span> Data Exploration with <code>tk.summarize_by_time</code></a>
  <ul class="collapse">
  <li><a href="#getting-weekly-totals" id="toc-getting-weekly-totals" class="nav-link" data-scroll-target="#getting-weekly-totals">Getting Weekly Totals</a></li>
  <li><a href="#get-weekly-totals-by-group-category-2" id="toc-get-weekly-totals-by-group-category-2" class="nav-link" data-scroll-target="#get-weekly-totals-by-group-category-2">Get Weekly Totals by Group (Category 2)</a></li>
  <li><a href="#long-vs-wide-format" id="toc-long-vs-wide-format" class="nav-link" data-scroll-target="#long-vs-wide-format">Long vs Wide Format</a></li>
  </ul></li>
  <li><a href="#visualize-your-time-series-data-with-tk.plot_timeseries" id="toc-visualize-your-time-series-data-with-tk.plot_timeseries" class="nav-link" data-scroll-target="#visualize-your-time-series-data-with-tk.plot_timeseries"><span class="header-section-number">2.3</span> Visualize your time series data with <code>tk.plot_timeseries</code></a></li>
  </ul></li>
  <li><a href="#create-a-product-forecast-model" id="toc-create-a-product-forecast-model" class="nav-link" data-scroll-target="#create-a-product-forecast-model"><span class="header-section-number">3</span> Create a Product Forecast Model</a>
  <ul class="collapse">
  <li><a href="#making-irregular-data-regular-with-tk.pad_by_time" id="toc-making-irregular-data-regular-with-tk.pad_by_time" class="nav-link" data-scroll-target="#making-irregular-data-regular-with-tk.pad_by_time"><span class="header-section-number">3.1</span> Making irregular data regular with <code>tk.pad_by_time</code></a></li>
  <li><a href="#making-future-dates-easier-with-tk.future_frame" id="toc-making-future-dates-easier-with-tk.future_frame" class="nav-link" data-scroll-target="#making-future-dates-easier-with-tk.future_frame"><span class="header-section-number">3.2</span> Making Future Dates Easier with <code>tk.future_frame</code></a></li>
  <li><a href="#lag-values-with-tk.augment_lags" id="toc-lag-values-with-tk.augment_lags" class="nav-link" data-scroll-target="#lag-values-with-tk.augment_lags"><span class="header-section-number">3.3</span> Lag Values with <code>tk.augment_lags</code></a></li>
  <li><a href="#date-features-with-tk.augment_timeseries_signature" id="toc-date-features-with-tk.augment_timeseries_signature" class="nav-link" data-scroll-target="#date-features-with-tk.augment_timeseries_signature"><span class="header-section-number">3.4</span> Date Features with <code>tk.augment_timeseries_signature</code></a>
  <ul class="collapse">
  <li><a href="#one-hot-encoding" id="toc-one-hot-encoding" class="nav-link" data-scroll-target="#one-hot-encoding">One-Hot Encoding</a></li>
  <li><a href="#training-and-future-feature-sets" id="toc-training-and-future-feature-sets" class="nav-link" data-scroll-target="#training-and-future-feature-sets">Training and Future Feature Sets</a></li>
  </ul></li>
  <li><a href="#scikit-learn-model" id="toc-scikit-learn-model" class="nav-link" data-scroll-target="#scikit-learn-model"><span class="header-section-number">3.5</span> Scikit Learn Model</a>
  <ul class="collapse">
  <li><a href="#fitting-a-random-forest-regressor" id="toc-fitting-a-random-forest-regressor" class="nav-link" data-scroll-target="#fitting-a-random-forest-regressor">Fitting a Random Forest Regressor</a></li>
  <li><a href="#prediction" id="toc-prediction" class="nav-link" data-scroll-target="#prediction">Prediction</a></li>
  <li><a href="#cleaning-up" id="toc-cleaning-up" class="nav-link" data-scroll-target="#cleaning-up">Cleaning Up</a></li>
  <li><a href="#pre-visualization-wrangling" id="toc-pre-visualization-wrangling" class="nav-link" data-scroll-target="#pre-visualization-wrangling">Pre-Visualization Wrangling</a></li>
  <li><a href="#visualize-the-forecast" id="toc-visualize-the-forecast" class="nav-link" data-scroll-target="#visualize-the-forecast">Visualize the Forecast</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions"><span class="header-section-number">4</span> Conclusions</a></li>
  <li><a href="#more-coming-soon" id="toc-more-coming-soon" class="nav-link" data-scroll-target="#more-coming-soon"><span class="header-section-number">5</span> More Coming Soon…</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/business-science/pytimetk/edit/main/tutorials/01_sales_crm.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/business-science/pytimetk/issues" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Sales Analysis</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this tutorial, we will use pytimetk and its powerful functions to perform a time series analysis on a dataset representing bike sales. Our goal is to understand the patterns in the data and forecast future sales. You will:</p>
<ul>
<li>Examine ways to wrangle complex transactional data with <code>tk.summarize_by_time</code></li>
<li>Discover how to visualize customer and product data with <code>tk.plot_timeseries</code></li>
<li>Using <code>tk.pad_by_time</code> and <code>tk.future_frame</code> to prepare data for modeling</li>
<li>Learn how to add many important time series features with augment functions including <code>tk.augment_timeseries_signature</code> and <code>tk.agument_lags</code></li>
<li>Integrate these techniques into a sales forecast with <code>sklearn</code></li>
</ul>
<section id="tutorial-setup" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Tutorial Setup</h1>
<section id="load-packages." class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="load-packages."><span class="header-section-number">1.1</span> Load Packages.</h2>
<p>If you do not have <code>pytimetk</code> installed, you can install by using</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pip install pytimetk</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>or for the latest features and functionality, you can install the development version.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pip install git<span class="op">+</span>https:<span class="op">//</span>github.com<span class="op">/</span>business<span class="op">-</span>science<span class="op">/</span>pytimetk.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="1">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytimetk <span class="im">as</span> tk</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="load-inspect-dataset" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="load-inspect-dataset"><span class="header-section-number">1.2</span> Load &amp; inspect dataset</h2>
<p>To kick off our analysis, we’ll begin by importing essential libraries and accessing the ‘bike_sales’ dataset available within pytimetk’s suite of built-in datasets.</p>
<p>The Bike Sales dataset exemplifies what one might find in a CRM (Customer Relationship Management) system. CRM systems are pivotal for businesses, offering vital insights by tracking sales throughout the entire sales funnel. Such datasets are rich with transaction-level data, encompassing elements like order numbers, individual order lines, customer details, product information, and specific transaction data.</p>
<p>Transactional data, such as this, inherently holds the essential components for time series analysis:</p>
<ul>
<li>Time Stamps</li>
<li>Associated Values</li>
<li>Distinct Groups or Categories</li>
</ul>
<p>Given these attributes, the Bike Sales dataset emerges as an ideal candidate for analysis using pytimetk.</p>
</section>
</section>
<section id="exploratory-analysis" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Exploratory Analysis</h1>
<section id="initial-inspection-with-tk.glimpse" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="initial-inspection-with-tk.glimpse"><span class="header-section-number">2.1</span> Initial Inspection with <code>tk.glimpse</code></h2>
<p>To get a preliminary understanding of our data, let’s utilize the <code>tk.glimpse()</code> function from pytimetk. This will provide us with a snapshot of the available fields, their respective data types, and a sneak peek into the data entries.</p>
<div class="cell" data-execution_count="2">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> tk.datasets.load_dataset(<span class="st">'bike_sales_sample'</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'order_date'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'order_date'</span>])</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>df.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 2466 rows of 13 columns
order_id:        int64             [1, 1, 2, 2, 3, 3, 3, 3, 3, 4, 5, 5,  ...
order_line:      int64             [1, 2, 1, 2, 1, 2, 3, 4, 5, 1, 1, 2,  ...
order_date:      datetime64[ns]    [Timestamp('2011-01-07 00:00:00'), Ti ...
quantity:        int64             [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,  ...
price:           int64             [6070, 5970, 2770, 5970, 10660, 3200, ...
total_price:     int64             [6070, 5970, 2770, 5970, 10660, 3200, ...
model:           object            ['Jekyll Carbon 2', 'Trigger Carbon 2 ...
category_1:      object            ['Mountain', 'Mountain', 'Mountain',  ...
category_2:      object            ['Over Mountain', 'Over Mountain', 'T ...
frame_material:  object            ['Carbon', 'Carbon', 'Aluminum', 'Car ...
bikeshop_name:   object            ['Ithaca Mountain Climbers', 'Ithaca  ...
city:            object            ['Ithaca', 'Ithaca', 'Kansas City', ' ...
state:           object            ['NY', 'NY', 'KS', 'KS', 'KY', 'KY',  ...</code></pre>
</div>
</div>
</section>
<section id="data-exploration-with-tk.summarize_by_time" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="data-exploration-with-tk.summarize_by_time"><span class="header-section-number">2.2</span> Data Exploration with <code>tk.summarize_by_time</code></h2>
<p>CRM data is often bustling with activity, reflecting the myriad of transactions happening daily. Due to this high volume, the data can sometimes seem overwhelming or noisy. To derive meaningful insights, it’s essential to aggregate this data over specific time intervals. This is where tk.summarize_by_time() comes into play.</p>
<p>The <code>tk.summarize_by_time()</code> function offers a streamlined approach to time-based data aggregation. By defining a desired frequency and an aggregation method, this function seamlessly organizes your data. The beauty of it is its versatility; from a broad array of built-in aggregation methods and frequencies to the flexibility of integrating a custom function, it caters to a range of requirements.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Getting to know <code>tk.summarize_by_time()</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Curious about the various options it provides?</p>
<ul>
<li>Click here to see our <a href="../guides/04_wrangling.html">Data Wrangling Guide</a></li>
<li>Use <code>help(tk.summarize_by_time)</code> to review additional helpful documentation. And explore the plethora of possibilities!</li>
</ul>
</div>
</div>
</div>
<section id="getting-weekly-totals" class="level3">
<h3 class="anchored" data-anchor-id="getting-weekly-totals">Getting Weekly Totals</h3>
<p>We can quickly get totals by week with <code>summarize_byt_time</code>.</p>
<div class="cell" data-execution_count="3">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>weekly_totals <span class="op">=</span> df.summarize_by_time(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    date_column  <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    value_column <span class="op">=</span> <span class="st">'total_price'</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    agg_func     <span class="op">=</span> [<span class="st">'sum'</span>],</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    freq         <span class="op">=</span> <span class="st">'W'</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>weekly_totals.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2011-01-09</td>
<td>12040</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2011-01-16</td>
<td>151460</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2011-01-23</td>
<td>143850</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2011-01-30</td>
<td>175665</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2011-02-06</td>
<td>105210</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2011-02-13</td>
<td>250390</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>2011-02-20</td>
<td>410595</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>2011-02-27</td>
<td>254045</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2011-03-06</td>
<td>308420</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>2011-03-13</td>
<td>45450</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="get-weekly-totals-by-group-category-2" class="level3">
<h3 class="anchored" data-anchor-id="get-weekly-totals-by-group-category-2">Get Weekly Totals by Group (Category 2)</h3>
<p>To better understand your data, you might want to add groups to this summary. We can include a <code>groupby</code> before the <code>summarize_by_time</code> and then aggregate our data.</p>
<div class="cell" data-execution_count="4">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a> sales_by_week <span class="op">=</span> df <span class="op">\</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category_2'</span>) <span class="op">\</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    .summarize_by_time(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        value_column <span class="op">=</span> <span class="st">'total_price'</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        agg_func <span class="op">=</span> [<span class="st">'sum'</span>],</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        freq <span class="op">=</span> <span class="st">'W'</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>sales_by_week.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">category_2</th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Cross Country Race</td>
<td>2011-01-16</td>
<td>61750</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Cross Country Race</td>
<td>2011-01-23</td>
<td>25050</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Cross Country Race</td>
<td>2011-01-30</td>
<td>56860</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Cross Country Race</td>
<td>2011-02-06</td>
<td>8740</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Cross Country Race</td>
<td>2011-02-13</td>
<td>78070</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Cross Country Race</td>
<td>2011-02-20</td>
<td>115010</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Cross Country Race</td>
<td>2011-02-27</td>
<td>64290</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Cross Country Race</td>
<td>2011-03-06</td>
<td>95070</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Cross Country Race</td>
<td>2011-03-13</td>
<td>3200</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Cross Country Race</td>
<td>2011-03-20</td>
<td>21170</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="long-vs-wide-format" class="level3">
<h3 class="anchored" data-anchor-id="long-vs-wide-format">Long vs Wide Format</h3>
<p>This long format can make it a little hard to compare the different group values visually, so instead of long-format you might want to pivot wide to view the data.</p>
<div class="cell" data-execution_count="5">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sales_by_week_wide <span class="op">=</span> df <span class="op">\</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category_2'</span>) <span class="op">\</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    .summarize_by_time(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        value_column <span class="op">=</span> <span class="st">'total_price'</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        agg_func <span class="op">=</span> [<span class="st">'sum'</span>],</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        freq <span class="op">=</span> <span class="st">'W'</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        wide_format <span class="op">=</span> <span class="va">True</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>sales_by_week_wide.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum_Cross Country Race</th>
<th data-quarto-table-cell-role="th">total_price_sum_Cyclocross</th>
<th data-quarto-table-cell-role="th">total_price_sum_Elite Road</th>
<th data-quarto-table-cell-role="th">total_price_sum_Endurance Road</th>
<th data-quarto-table-cell-role="th">total_price_sum_Fat Bike</th>
<th data-quarto-table-cell-role="th">total_price_sum_Over Mountain</th>
<th data-quarto-table-cell-role="th">total_price_sum_Sport</th>
<th data-quarto-table-cell-role="th">total_price_sum_Trail</th>
<th data-quarto-table-cell-role="th">total_price_sum_Triathalon</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2011-01-09</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>12040.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2011-01-16</td>
<td>61750.0</td>
<td>1960.0</td>
<td>49540.0</td>
<td>11110.0</td>
<td>0.0</td>
<td>9170.0</td>
<td>4030.0</td>
<td>7450.0</td>
<td>6450.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2011-01-23</td>
<td>25050.0</td>
<td>3500.0</td>
<td>51330.0</td>
<td>47930.0</td>
<td>0.0</td>
<td>3840.0</td>
<td>0.0</td>
<td>0.0</td>
<td>12200.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2011-01-30</td>
<td>56860.0</td>
<td>2450.0</td>
<td>43895.0</td>
<td>24160.0</td>
<td>0.0</td>
<td>10880.0</td>
<td>3720.0</td>
<td>26700.0</td>
<td>7000.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2011-02-06</td>
<td>8740.0</td>
<td>7000.0</td>
<td>35640.0</td>
<td>22680.0</td>
<td>3730.0</td>
<td>14270.0</td>
<td>980.0</td>
<td>10220.0</td>
<td>1950.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2011-02-13</td>
<td>78070.0</td>
<td>0.0</td>
<td>83780.0</td>
<td>24820.0</td>
<td>2130.0</td>
<td>17160.0</td>
<td>6810.0</td>
<td>17120.0</td>
<td>20500.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>2011-02-20</td>
<td>115010.0</td>
<td>7910.0</td>
<td>79770.0</td>
<td>27650.0</td>
<td>26100.0</td>
<td>37830.0</td>
<td>10925.0</td>
<td>96250.0</td>
<td>9150.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>2011-02-27</td>
<td>64290.0</td>
<td>6650.0</td>
<td>86900.0</td>
<td>31900.0</td>
<td>5860.0</td>
<td>22070.0</td>
<td>6165.0</td>
<td>16410.0</td>
<td>13800.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2011-03-06</td>
<td>95070.0</td>
<td>2450.0</td>
<td>31990.0</td>
<td>47660.0</td>
<td>5860.0</td>
<td>82060.0</td>
<td>9340.0</td>
<td>26790.0</td>
<td>7200.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>2011-03-13</td>
<td>3200.0</td>
<td>4200.0</td>
<td>23110.0</td>
<td>7260.0</td>
<td>0.0</td>
<td>5970.0</td>
<td>1710.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You can now observe the total sales for each product side by side. This streamlined view facilitates easy comparison between product sales.</p>
</section>
</section>
<section id="visualize-your-time-series-data-with-tk.plot_timeseries" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="visualize-your-time-series-data-with-tk.plot_timeseries"><span class="header-section-number">2.3</span> Visualize your time series data with <code>tk.plot_timeseries</code></h2>
<p>You can now visualize the summarized data to gain a clearer insight into the prevailing trends.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-groups="bbands-plotly-plotnine">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Plotly</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Plotnine</a></li></ul>
<div class="tab-content" data-groups="bbands-plotly-plotnine">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>sales_by_week <span class="op">\</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category_2'</span>) <span class="op">\</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    .plot_timeseries(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,  </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        value_column <span class="op">=</span> <span class="st">'total_price_sum'</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> <span class="st">'Bike Sales by Category'</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        facet_ncol <span class="op">=</span> <span class="dv">2</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        facet_scales <span class="op">=</span> <span class="st">"free"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        y_intercept_color <span class="op">=</span> tk.palette_timetk()[<span class="st">'steel_blue'</span>],</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        width <span class="op">=</span> <span class="dv">1000</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        height <span class="op">=</span> <span class="dv">800</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        y_lab <span class="op">=</span> <span class="st">'Total Sales'</span>, </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        engine <span class="op">=</span> <span class="st">'plotly'</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">

<div>                            <div id="d63f151c-cc17-49fe-8c43-56fe4324148e" class="plotly-graph-div" style="height:800px; width:1000px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("d63f151c-cc17-49fe-8c43-56fe4324148e")) {                    Plotly.newPlot(                        "d63f151c-cc17-49fe-8c43-56fe4324148e",                        [{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"C","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[61750,25050,56860,8740,78070,115010,64290,95070,3200,21170,28990,51860,85910,138230,138350,136090,32110,139010,2060,26130,30360,88280,109470,107280,56430,62320,141620,75720,21240,11620,9730,22780,53680,38360,90290,7380,0,68630,59840,51820,62940,9060,15980,59180,132550,68430,29470,71080,9800,41620,2340],"type":"scatter","xaxis":"x","yaxis":"y","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[38382.64475062822,44638.843169875356,51095.11190467083,57309.983093907,63066.674216049054,64828.51176539599,62395.03118395181,57247.3259250009,51033.70762690619,48067.46513235643,53128.029535503665,66600.29655318348,84398.66928974458,97507.26324287987,104064.41838607145,99707.94478085455,86865.67663349096,71294.98704899162,60405.06183347504,56897.88080740619,60630.653541991145,66315.02096286195,74173.45372229055,82133.5815894191,84554.18579247493,77639.74815191151,65296.701862057715,53640.79972844027,44898.229291014635,36754.35835773855,31096.18572038713,32053.59069790124,34979.413608558134,36634.8618590388,39228.104181736206,42406.07970049925,43988.101903151095,44411.020733104095,44236.02330350809,44664.10657623569,45226.21380404725,47203.14974614625,50009.459334505686,51230.78875775085,53097.291012328584,55080.78183972656,53357.19628808946,43441.55536852784,32940.787045796766,22136.361719821492,11255.620438589895],"type":"scatter","xaxis":"x","yaxis":"y","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"C","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[1960,3500,2450,7000,0,7910,6650,2450,4200,0,17290,0,8400,12460,5950,25060,13650,13790,0,2450,22750,29750,1960,24360,11410,1960,10150,4200,0,5250,1960,0,29050,21000,8960,10080,0,1750,3500,7910,9380,7910,0,1750,9380,4410,0,10780,0,4200],"type":"scatter","xaxis":"x2","yaxis":"y2","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[2417.801286984556,2948.66163420199,3465.5588305387523,3964.064035963144,4441.339695073869,4476.744524967209,4385.890987218628,4507.414001547581,4617.126674577872,4875.334673277194,5555.309357874187,6642.425523695857,8095.1223871340735,9646.263811348836,10865.611650161489,11365.151390511473,11152.987321447674,11377.67266219956,11801.864114147389,11720.656983463607,11994.165280584266,12225.759119056887,12707.637491228028,12403.35881794914,10623.687487193074,8617.601880474054,6818.600528640344,5085.43475863695,3785.67470964925,2998.305219081055,3751.2781231934605,5267.441473713987,6184.869937981339,6499.465682851918,7077.3151063709265,7355.367533442638,6191.115393222727,5510.337165395873,5339.586436177435,5225.810883242625,5323.902450884513,5541.8610399058925,5406.861294284596,4787.584266837181,4340.174119798005,4228.996091440367,4120.192156103746,3984.99748588695,3830.299614973106,3626.8345250646953],"type":"scatter","xaxis":"x2","yaxis":"y2","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"E","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[49540,51330,43895,35640,83780,79770,86900,31990,23110,10230,86490,7170,135540,142615,26790,61110,34770,119745,31485,23860,72700,65940,49890,57315,98950,28410,107580,60920,40320,17760,39090,14730,56195,0,64500,90060,12790,31845,35575,24880,62150,25680,9110,24780,75460,42415,34605,50560,12270,21075],"type":"scatter","xaxis":"x3","yaxis":"y3","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[44245.40918410986,48910.523446161016,53460.38253569372,57436.03541491694,60550.25727493292,58540.2534796927,55127.86420762545,51650.11437138042,46464.4984216946,45949.470874771476,52804.645228829504,57590.2620915546,59894.63185545462,62126.35679616701,63092.14058152784,60514.387541969576,53088.329543693835,49847.02734785048,51648.015838243366,52874.31933569271,53785.59298006238,56629.38953094816,60793.09192299351,64422.66168709211,65402.01605060973,63841.91267299772,59741.774491841934,53769.37599719863,46776.28303623634,40719.95359987405,34606.355058168,33589.97988441132,37363.32953068267,40178.03265730705,40460.488244985354,40363.938411806004,40059.05763503098,39427.725247751485,36113.64920852302,32475.767424995494,31601.925119332427,33442.97147748968,35628.0019929869,36751.65415629574,37446.52778287761,38393.80565170646,35561.13884718244,32279.904140345818,28364.73026892622,23729.15948462061],"type":"scatter","xaxis":"x3","yaxis":"y3","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"E","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[11110,47930,24160,22680,24820,27650,31900,47660,7260,4230,55860,3730,93730,61240,16470,44920,14710,54910,14990,23850,44360,49020,12180,38540,50550,49770,53170,24750,14910,44940,25020,3090,37350,4800,75510,24230,9590,33330,11610,26660,57970,7910,11830,15080,104560,28760,49700,17830,7540,30750,7110],"type":"scatter","xaxis":"x4","yaxis":"y4","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[23545.389690019736,24664.430400265945,25987.828323666807,27494.803759825634,28649.62858871449,27842.624016311533,26590.259208702017,26631.058296028306,26602.3133312899,27767.07372215204,30714.359405970354,32945.703415808115,35443.01420119503,37197.40644167424,37634.18641944044,36384.97948055452,32893.97389311774,31425.756957074685,32531.203150937647,32849.89075921218,33272.891481348386,35053.36316424331,38547.85664712756,41046.7491331574,40854.58732299658,39664.41660342322,38822.86856868628,36270.30745181822,31633.913298330248,27263.10534289621,24428.374473408083,24176.647580515822,24044.27461443339,23008.693236428622,22912.875744862475,23335.833064764982,23537.831952141078,24307.65803226649,24024.867777921034,22869.522714539373,21634.0688042562,20406.0807469052,20987.478470358335,22382.59363523234,22749.45337468962,23536.41185121873,24917.439624466544,23090.237305080384,20338.10609085501,16981.018039759012,13350.957578464378],"type":"scatter","xaxis":"x4","yaxis":"y4","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"F","showlegend":false,"x":["2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00"],"y":[3730,2130,26100,5860,5860,0,0,4260,3730,4260,11190,37300,36750,0,0,2130,0,0,3730,0,10120,2130,9590,10120,2130,0,0,2130,0,5860,3730,2130,0,2130,2130,2130,2130,0,0,0,2130,4260,4260,0,7460],"type":"scatter","xaxis":"x5","yaxis":"y5","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00"],"y":[3658.517142296387,3693.327973119099,3614.4260683715393,3467.035503890785,3651.179636301747,3216.7073342474087,2834.0943114839797,3032.890436953099,4531.583574480952,6640.134708394009,6043.527073244801,4394.347816161062,3778.204678413188,1849.7507616777177,444.53229949389066,609.0767475967808,980.6725430327572,1387.008136757516,2117.573627063776,3115.4739704574577,4510.853704039231,5558.972252277626,5643.538225200636,4809.429103514502,3699.916373310291,2270.955397563272,1239.0109574863234,1503.7957145126122,2191.3463789906123,2544.7960050284846,2552.9912137378583,2449.7306763860897,2067.8983251150817,1786.5701647933686,1753.3471597509526,1654.4648596203037,1294.5718761587448,926.9402114188723,886.8812468293006,1321.6292874658059,2041.430682145095,2836.9244119715736,3867.2028333669564,4875.856826413652,5840.724168740868],"type":"scatter","xaxis":"x5","yaxis":"y5","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"O","showlegend":false,"x":["2011-01-09T00:00:00","2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[12040,9170,3840,10880,14270,17160,37830,22070,82060,5970,3200,14270,57400,41780,39750,33250,56380,9170,39850,3200,21430,11190,33040,7040,61480,58700,40820,91020,48380,7990,36670,30370,7990,7990,11720,19290,6400,7990,54480,21310,7680,24300,8200,0,0,61620,24620,27720,9800,6400,59330],"type":"scatter","xaxis":"x6","yaxis":"y6","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-09T00:00:00","2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[6295.397866666291,8497.307866123756,10926.447131029956,13468.637808003432,16155.012648301652,18980.74937300447,18955.136737103825,17463.1209456941,16698.85538768004,17125.053399192344,18473.23352110862,21523.76138974992,27230.473728165667,33138.74343647812,36588.6293108461,36477.332648378695,32865.45906857916,28839.611135683226,25289.03180050754,22519.69207378601,21059.515806093743,23761.743154277952,29085.068540666874,35109.00061942534,40660.69416768437,44251.60245232382,44787.75054847119,42926.54160571138,38867.25695832778,33762.74662321974,28471.618941906345,23010.56600693633,18993.29903254897,15922.735962199571,12988.260985173942,12212.323288033374,13535.178266205861,14426.859313298548,14905.909366585425,14932.527338739506,14555.91112256112,12481.785104306222,9574.950770072212,10256.318241372286,12196.986963532736,13099.412635549006,14939.179688266167,19378.39300479592,24349.484851600282,28980.755843803257,33443.836702285946],"type":"scatter","xaxis":"x6","yaxis":"y6","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"S","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[4030,0,3720,980,6810,10925,6165,9340,1710,0,7575,2875,8385,13070,10120,20950,2710,24695,3920,8795,2000,4705,4880,11265,11480,6045,14640,7985,0,3770,5740,2150,3415,1065,8190,3940,1350,8800,1350,14320,5445,980,1630,2980,3825,7890,0,8320,0,14355],"type":"scatter","xaxis":"x7","yaxis":"y7","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[1403.4904156630112,2427.313318834494,3460.037244109463,4457.163394421633,5419.701598527108,5938.578595385339,5971.995211176446,5781.858769532535,5350.757898400667,5118.6851953518,5530.702274312002,6592.815683894845,8133.428123012487,9075.826362609634,9056.395064061235,8472.040013749804,7936.241331503634,6871.1421067739375,5654.8789715189805,4953.830271291245,5368.818436289716,6238.602190152267,7004.834680174823,7853.823033511137,8601.29256446227,8563.850574220734,7832.9333958293555,6842.888131743032,5808.596981261145,4735.187457208923,3754.551384476683,3546.6453823443444,3743.1149392304374,3797.0643587197374,3940.011782683144,4285.753370128758,4826.79905120806,5137.236169016828,4938.675948058597,4593.660179331857,4295.926710169265,3960.1380564737274,3729.2944882184997,3517.020193961036,3727.8742220486038,4288.210021859277,5428.271684092979,6617.831633535563,7788.935760344337,8979.572656035934],"type":"scatter","xaxis":"x7","yaxis":"y7","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"T","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[7450,0,26700,10220,17120,96250,16410,26790,0,7460,21150,5330,49870,92770,36030,85540,11290,64960,2340,31510,14510,27140,10550,39990,48800,103480,45210,65570,7460,45780,39020,3200,47510,5330,22830,18990,0,37820,32620,19420,28620,2340,11080,12250,45820,29360,27120,5650,13030,24210,2660],"type":"scatter","xaxis":"x8","yaxis":"y8","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[7230.1246266403905,9546.831528571925,11685.092686834072,13782.718205822353,15899.781481747776,15970.978897868283,14936.444063257035,14475.162854969873,14391.93174977839,15865.865241419584,19479.3754397571,24728.247332710773,30247.457877870187,33673.09551976167,36182.706208734046,36411.33862604547,34060.37848093966,30413.798897296343,27391.542094045777,24640.028084266633,24137.502895526468,25934.669045962393,30178.881528494123,34851.127876389764,39786.71077809437,43050.72830118827,44698.55361611541,44357.555850868215,41732.11446129719,37602.54333617857,32908.51537410331,28606.71198621602,25022.07012001747,21450.878068699858,19881.988333834917,20588.966323526653,21458.864874049505,22413.557816474568,22330.080845010074,21432.47311922174,19973.780565388686,19026.78629460318,19581.409907198038,20519.448001038756,20855.865715295342,21490.408205895976,21570.74443244696,18700.548383217745,15231.33453477717,11623.70699614049,8062.697456109882],"type":"scatter","xaxis":"x8","yaxis":"y8","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"T","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[6450,12200,7000,1950,20500,9150,13800,7200,0,9000,30000,4500,48300,30850,1950,25950,7000,9300,3200,0,13450,7850,3200,33400,28850,0,7350,23200,0,14350,21650,8100,0,0,12150,7850,0,5150,9600,4500,39000,4650,0,5900,39150,15350,3200,28350,2700,3900],"type":"scatter","xaxis":"x9","yaxis":"y9","hoverlabel":{"font":{"size":8.8}}},{"line":{"color":"rgba(51, 102, 255, 1.0)","width":1.0},"mode":"lines","name":"Smoother","showlegend":false,"x":["2011-01-16T00:00:00","2011-01-23T00:00:00","2011-01-30T00:00:00","2011-02-06T00:00:00","2011-02-13T00:00:00","2011-02-20T00:00:00","2011-02-27T00:00:00","2011-03-06T00:00:00","2011-03-13T00:00:00","2011-03-20T00:00:00","2011-03-27T00:00:00","2011-04-03T00:00:00","2011-04-10T00:00:00","2011-04-17T00:00:00","2011-04-24T00:00:00","2011-05-01T00:00:00","2011-05-08T00:00:00","2011-05-15T00:00:00","2011-05-22T00:00:00","2011-05-29T00:00:00","2011-06-05T00:00:00","2011-06-12T00:00:00","2011-06-19T00:00:00","2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[7574.333393056837,8270.723175239327,8964.591460553424,9566.497357532568,9954.779163375108,9591.634506905339,9592.618313607456,10150.815354245411,10479.171432648815,11800.606581599,14212.947290214759,16026.931530994823,17335.50513463201,17409.522471601922,16499.986558450426,14819.967437546415,11594.979205999387,9130.87580499433,7884.145015399177,7045.925623612849,8050.135542918949,10585.605934270428,12010.446910054028,12414.13409476685,12951.777555015078,13362.670012537024,13033.330747673092,11996.499986735036,11602.302084479406,11089.75030331183,9785.099299309812,8623.949215596107,7863.825641240547,6409.49773545269,5152.125391465926,5203.5755413055,5808.770036188028,5957.481466270692,5566.4618766338535,5145.538689850358,5129.848931705977,5521.56926180264,6301.269629366299,7185.756079700571,8632.46519647916,9552.696160728783,8999.706963291064,8371.98268987421,7564.782940693471,6487.597315322021],"type":"scatter","xaxis":"x9","yaxis":"y9","hoverlabel":{"font":{"size":8.8}}}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,0.45],"title":{"text":""},"tickformat":"%b %Y","showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis":{"anchor":"x","domain":[0.88,1.0],"title":{"text":"Total Sales"},"tickfont":{"size":8.8}},"xaxis2":{"anchor":"y2","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis2":{"anchor":"x2","domain":[0.88,1.0],"tickfont":{"size":8.8}},"xaxis3":{"anchor":"y3","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis3":{"anchor":"x3","domain":[0.66,0.78],"tickfont":{"size":8.8}},"xaxis4":{"anchor":"y4","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis4":{"anchor":"x4","domain":[0.66,0.78],"tickfont":{"size":8.8}},"xaxis5":{"anchor":"y5","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis5":{"anchor":"x5","domain":[0.44,0.56],"tickfont":{"size":8.8}},"xaxis6":{"anchor":"y6","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis6":{"anchor":"x6","domain":[0.44,0.56],"tickfont":{"size":8.8}},"xaxis7":{"anchor":"y7","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis7":{"anchor":"x7","domain":[0.22,0.33999999999999997],"tickfont":{"size":8.8}},"xaxis8":{"anchor":"y8","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis8":{"anchor":"x8","domain":[0.22,0.33999999999999997],"tickfont":{"size":8.8}},"xaxis9":{"anchor":"y9","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis9":{"anchor":"x9","domain":[0.0,0.12],"tickfont":{"size":8.8}},"xaxis10":{"anchor":"y10","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis10":{"anchor":"x10","domain":[0.0,0.12],"tickfont":{"size":8.8}},"annotations":[{"font":{"size":8.8},"showarrow":false,"text":"Cross Country Race","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Cyclocross","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Elite Road","x":0.225,"xanchor":"center","xref":"paper","y":0.78,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Endurance Road","x":0.775,"xanchor":"center","xref":"paper","y":0.78,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Fat Bike","x":0.225,"xanchor":"center","xref":"paper","y":0.56,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Over Mountain","x":0.775,"xanchor":"center","xref":"paper","y":0.56,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Sport","x":0.225,"xanchor":"center","xref":"paper","y":0.33999999999999997,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Trail","x":0.775,"xanchor":"center","xref":"paper","y":0.33999999999999997,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"Triathalon","x":0.225,"xanchor":"center","xref":"paper","y":0.12,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend","font":{"size":8.8}},"font":{"size":8.8}},"title":{"text":"Bike Sales by Category","font":{"size":13.2}},"margin":{"l":10,"r":10,"t":40,"b":40},"font":{"size":11},"autosize":true,"width":1000,"height":800},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('d63f151c-cc17-49fe-8c43-56fe4324148e');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>sales_by_week <span class="op">\</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category_2'</span>) <span class="op">\</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    .plot_timeseries(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,  </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        value_column <span class="op">=</span> <span class="st">'total_price_sum'</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> <span class="st">'Bike Sales by Category'</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        facet_ncol <span class="op">=</span> <span class="dv">2</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        facet_scales <span class="op">=</span> <span class="st">"free"</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        y_intercept_color <span class="op">=</span> tk.palette_timetk()[<span class="st">'steel_blue'</span>],</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        width <span class="op">=</span> <span class="dv">1000</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        height <span class="op">=</span> <span class="dv">800</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        y_lab <span class="op">=</span> <span class="st">'Total Sales'</span>, </span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        engine <span class="op">=</span> <span class="st">'plotnine'</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="01_sales_crm_files/figure-html/cell-8-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>&lt;Figure Size: (1000 x 800)&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>The graph showcases a pronounced uptick in sales for most of the different bike products during the summer. It’s a natural trend, aligning with our understanding that people gravitate towards biking during the balmy summer days. Conversely, as the chill of winter sets in at the year’s start and end, we observe a corresponding dip in sales.</p>
<p>It’s worth highlighting the elegance of the <code>plot_timeseries</code> function. Beyond just plotting raw data, it introduces a smoother, accentuating underlying trends and making them more discernible. This enhancement ensures we can effortlessly capture and comprehend the cyclical nature of bike sales throughout the year.</p>
</section>
</section>
<section id="create-a-product-forecast-model" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Create a Product Forecast Model</h1>
<p>Forecasting future sales for bikes requires meticulous data preparation, and pytimetk streamlines this process for us. When crafting a Machine Learning model tailored for time series analysis, there are several pivotal steps to follow:</p>
<ol type="1">
<li><p><strong>Time Padding for Comprehensive Historical Data:</strong> It’s essential to ensure that our data captures every week, even those that witnessed zero sales. This padding becomes especially pertinent when integrating time series features, like lags.</p></li>
<li><p><strong>Crafting the Future Frame:</strong> This step involves setting up a structure that accommodates the test data features, which will eventually be fed into our prediction function.</p></li>
<li><p><strong>Infusing Time Series Lag Features:</strong> These features are critical for capturing patterns in time series data, and they need to be integrated into our future frame.</p></li>
<li><p><strong>Feature / Date Augmentation:</strong> This step can involve adding contextual features that might influence sales, such as date features, holidays, promotional events, etc.</p></li>
<li><p><strong>Model Training:</strong> Once the data is prepped, it’s time to train our Machine Learning model, refining it to understand historical patterns and predict future trends.</p></li>
<li><p><strong>Making Predictions:</strong> After training, the model is ready to forecast sales for future periods based on the features of the new data.</p></li>
</ol>
<section id="making-irregular-data-regular-with-tk.pad_by_time" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="making-irregular-data-regular-with-tk.pad_by_time"><span class="header-section-number">3.1</span> Making irregular data regular with <code>tk.pad_by_time</code></h2>
<p>Kicking off our journey, we’ll utilize pytimetk’s <code>tk.pad_by_time()</code> function. For this, grouping by the ‘category_1’ variable is recommended. Moreover, it’s prudent to establish a definitive end date. This ensures that all groups are equipped with training data up to the most recent date, accommodating scenarios where certain categories might have seen no sales in the final training week. By doing so, we create a representative observation for every group, capturing the nuances of each category’s sales pattern.</p>
<div class="cell" data-execution_count="8">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>sales_padded <span class="op">=</span> sales_by_week <span class="op">\</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category_2'</span>) <span class="op">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    .pad_by_time(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        freq        <span class="op">=</span> <span class="st">'W'</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        end_date    <span class="op">=</span> sales_by_week.order_date.<span class="bu">max</span>()</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>sales_padded</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">category_2</th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Cross Country Race</td>
<td>2011-01-09</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Cross Country Race</td>
<td>2011-01-16</td>
<td>61750.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Cross Country Race</td>
<td>2011-01-23</td>
<td>25050.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Cross Country Race</td>
<td>2011-01-30</td>
<td>56860.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Cross Country Race</td>
<td>2011-02-06</td>
<td>8740.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">463</td>
<td>Triathalon</td>
<td>2011-12-04</td>
<td>3200.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">464</td>
<td>Triathalon</td>
<td>2011-12-11</td>
<td>28350.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">465</td>
<td>Triathalon</td>
<td>2011-12-18</td>
<td>2700.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">466</td>
<td>Triathalon</td>
<td>2011-12-25</td>
<td>3900.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">467</td>
<td>Triathalon</td>
<td>2012-01-01</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>468 rows × 3 columns</p>
</div>
</div>
</div>
</section>
<section id="making-future-dates-easier-with-tk.future_frame" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="making-future-dates-easier-with-tk.future_frame"><span class="header-section-number">3.2</span> Making Future Dates Easier with <code>tk.future_frame</code></h2>
<p>Moving on, let’s set up the future frame, which will serve as our test dataset. To achieve this, employ the <code>tk.future_frame()</code> method. This function allows for the specification of a grouping column and a forecast horizon.</p>
<p>Upon invoking <code>tk.future_frame()</code>, you’ll observe that placeholders (null values) are added for each group, extending 12 weeks into the future.</p>
<div class="cell" data-execution_count="9">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_with_futureframe <span class="op">=</span> sales_padded <span class="op">\</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category_2'</span>) <span class="op">\</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    .future_frame(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        length_out  <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>df_with_futureframe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"05d9e64877fb40f4ba6a48356534bbeb","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">category_2</th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Cross Country Race</td>
<td>2011-01-09</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Cross Country Race</td>
<td>2011-01-16</td>
<td>61750.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Cross Country Race</td>
<td>2011-01-23</td>
<td>25050.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Cross Country Race</td>
<td>2011-01-30</td>
<td>56860.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Cross Country Race</td>
<td>2011-02-06</td>
<td>8740.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">571</td>
<td>Triathalon</td>
<td>2012-02-26</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">572</td>
<td>Triathalon</td>
<td>2012-03-04</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">573</td>
<td>Triathalon</td>
<td>2012-03-11</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">574</td>
<td>Triathalon</td>
<td>2012-03-18</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">575</td>
<td>Triathalon</td>
<td>2012-03-25</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>576 rows × 3 columns</p>
</div>
</div>
</div>
</section>
<section id="lag-values-with-tk.augment_lags" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="lag-values-with-tk.augment_lags"><span class="header-section-number">3.3</span> Lag Values with <code>tk.augment_lags</code></h2>
<p>Crafting features from time series data can be intricate, but thanks to the suite of feature engineering tools in pytimetk, the process is streamlined and intuitive.</p>
<p>In this guide, we’ll focus on the basics: introducing a few lag variables and incorporating some date-related features.</p>
<p>Firstly, let’s dive into creating lag features.</p>
<p>Given our forecasting objective of a 12-week horizon, to ensure we have lag data available for every future point, we should utilize a lag of 12 or more. The beauty of the toolkit is that it supports the addition of multiple lags simultaneously.</p>
<p>Lag features play a pivotal role in machine learning for time series. Often, recent data offers valuable insights into future trends. To capture this recency effect, it’s crucial to integrate lag values. For this purpose, <code>tk.augment_lags()</code> comes in handy.</p>
<div class="cell" data-execution_count="10">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df_with_lags <span class="op">=</span> df_with_futureframe <span class="op">\</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category_2'</span>) <span class="op">\</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    .augment_lags(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        date_column  <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        value_column <span class="op">=</span> <span class="st">'total_price_sum'</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        lags         <span class="op">=</span> [<span class="dv">12</span>,<span class="dv">24</span>]</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>df_with_lags.head(<span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">category_2</th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_12</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_24</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Cross Country Race</td>
<td>2011-01-09</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Cross Country Race</td>
<td>2011-01-16</td>
<td>61750.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Cross Country Race</td>
<td>2011-01-23</td>
<td>25050.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Cross Country Race</td>
<td>2011-01-30</td>
<td>56860.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Cross Country Race</td>
<td>2011-02-06</td>
<td>8740.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Cross Country Race</td>
<td>2011-02-13</td>
<td>78070.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Cross Country Race</td>
<td>2011-02-20</td>
<td>115010.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Cross Country Race</td>
<td>2011-02-27</td>
<td>64290.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Cross Country Race</td>
<td>2011-03-06</td>
<td>95070.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Cross Country Race</td>
<td>2011-03-13</td>
<td>3200.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Cross Country Race</td>
<td>2011-03-20</td>
<td>21170.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Cross Country Race</td>
<td>2011-03-27</td>
<td>28990.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Cross Country Race</td>
<td>2011-04-03</td>
<td>51860.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>Cross Country Race</td>
<td>2011-04-10</td>
<td>85910.0</td>
<td>61750.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>Cross Country Race</td>
<td>2011-04-17</td>
<td>138230.0</td>
<td>25050.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Cross Country Race</td>
<td>2011-04-24</td>
<td>138350.0</td>
<td>56860.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Cross Country Race</td>
<td>2011-05-01</td>
<td>136090.0</td>
<td>8740.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Cross Country Race</td>
<td>2011-05-08</td>
<td>32110.0</td>
<td>78070.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>Cross Country Race</td>
<td>2011-05-15</td>
<td>139010.0</td>
<td>115010.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Cross Country Race</td>
<td>2011-05-22</td>
<td>2060.0</td>
<td>64290.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>Cross Country Race</td>
<td>2011-05-29</td>
<td>26130.0</td>
<td>95070.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>Cross Country Race</td>
<td>2011-06-05</td>
<td>30360.0</td>
<td>3200.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>Cross Country Race</td>
<td>2011-06-12</td>
<td>88280.0</td>
<td>21170.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>Cross Country Race</td>
<td>2011-06-19</td>
<td>109470.0</td>
<td>28990.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>Cross Country Race</td>
<td>2011-06-26</td>
<td>107280.0</td>
<td>51860.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Observe that lag values of 12 and 24 introduce missing entries at the dataset’s outset. This occurs because there isn’t available data from 12 or 24 weeks prior. To address these gaps, you can adopt one of two strategies:</p>
<ol type="1">
<li><p>Discard the Affected Rows: This is a recommended approach if your dataset is sufficiently large. Removing a few initial rows might not significantly impact the training process.</p></li>
<li><p>Backfill Missing Values: In situations with limited data, you might consider backfilling these nulls using the first available values from lag 12 and 24. However, the appropriateness of this technique hinges on your specific context and objectives.</p></li>
</ol>
<p>For the scope of this tutorial, we’ll opt to remove these rows. However, it’s worth pointing out that our dataset is quite small with limited historical data, so this might impact our model.</p>
<div class="cell" data-execution_count="11">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>lag_columns <span class="op">=</span> [col <span class="cf">for</span> col <span class="kw">in</span> df_with_lags.columns <span class="cf">if</span> <span class="st">'lag'</span> <span class="kw">in</span> col]</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df_no_nas <span class="op">=</span> df_with_lags <span class="op">\</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    .dropna(subset<span class="op">=</span>lag_columns, inplace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>df_no_nas.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">category_2</th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_12</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_24</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>Cross Country Race</td>
<td>2011-07-03</td>
<td>56430.0</td>
<td>85910.0</td>
<td>61750.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>Cross Country Race</td>
<td>2011-07-10</td>
<td>62320.0</td>
<td>138230.0</td>
<td>25050.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>Cross Country Race</td>
<td>2011-07-17</td>
<td>141620.0</td>
<td>138350.0</td>
<td>56860.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>Cross Country Race</td>
<td>2011-07-24</td>
<td>75720.0</td>
<td>136090.0</td>
<td>8740.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>Cross Country Race</td>
<td>2011-07-31</td>
<td>21240.0</td>
<td>32110.0</td>
<td>78070.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="date-features-with-tk.augment_timeseries_signature" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="date-features-with-tk.augment_timeseries_signature"><span class="header-section-number">3.4</span> Date Features with <code>tk.augment_timeseries_signature</code></h2>
<p>Now, let’s enrich our dataset with date-related features.</p>
<p>With the function <code>tk.augment_timeseries_signature()</code>, you can effortlessly append 29 date attributes to a timestamp. Given that our dataset captures weekly intervals, certain attributes like ‘hour’ may not be pertinent. Thus, it’s prudent to refine our columns, retaining only those that truly matter to our analysis.</p>
<div class="cell" data-execution_count="12">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df_with_datefeatures <span class="op">=</span> df_no_nas <span class="op">\</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    .augment_timeseries_signature(date_column<span class="op">=</span><span class="st">'order_date'</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>df_with_datefeatures.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">category_2</th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_12</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_24</th>
<th data-quarto-table-cell-role="th">order_date_index_num</th>
<th data-quarto-table-cell-role="th">order_date_year</th>
<th data-quarto-table-cell-role="th">order_date_year_iso</th>
<th data-quarto-table-cell-role="th">order_date_yearstart</th>
<th data-quarto-table-cell-role="th">order_date_yearend</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">order_date_mday</th>
<th data-quarto-table-cell-role="th">order_date_qday</th>
<th data-quarto-table-cell-role="th">order_date_yday</th>
<th data-quarto-table-cell-role="th">order_date_weekend</th>
<th data-quarto-table-cell-role="th">order_date_hour</th>
<th data-quarto-table-cell-role="th">order_date_minute</th>
<th data-quarto-table-cell-role="th">order_date_second</th>
<th data-quarto-table-cell-role="th">order_date_msecond</th>
<th data-quarto-table-cell-role="th">order_date_nsecond</th>
<th data-quarto-table-cell-role="th">order_date_am_pm</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>Cross Country Race</td>
<td>2011-07-03</td>
<td>56430.0</td>
<td>85910.0</td>
<td>61750.0</td>
<td>1309651200</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>3</td>
<td>3</td>
<td>184</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>Cross Country Race</td>
<td>2011-07-10</td>
<td>62320.0</td>
<td>138230.0</td>
<td>25050.0</td>
<td>1310256000</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>10</td>
<td>10</td>
<td>191</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>Cross Country Race</td>
<td>2011-07-17</td>
<td>141620.0</td>
<td>138350.0</td>
<td>56860.0</td>
<td>1310860800</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>17</td>
<td>17</td>
<td>198</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>Cross Country Race</td>
<td>2011-07-24</td>
<td>75720.0</td>
<td>136090.0</td>
<td>8740.0</td>
<td>1311465600</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>24</td>
<td>24</td>
<td>205</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>Cross Country Race</td>
<td>2011-07-31</td>
<td>21240.0</td>
<td>32110.0</td>
<td>78070.0</td>
<td>1312070400</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>31</td>
<td>31</td>
<td>212</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>Cross Country Race</td>
<td>2011-08-07</td>
<td>11620.0</td>
<td>139010.0</td>
<td>115010.0</td>
<td>1312675200</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>7</td>
<td>38</td>
<td>219</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>Cross Country Race</td>
<td>2011-08-14</td>
<td>9730.0</td>
<td>2060.0</td>
<td>64290.0</td>
<td>1313280000</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>14</td>
<td>45</td>
<td>226</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>Cross Country Race</td>
<td>2011-08-21</td>
<td>22780.0</td>
<td>26130.0</td>
<td>95070.0</td>
<td>1313884800</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>21</td>
<td>52</td>
<td>233</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>Cross Country Race</td>
<td>2011-08-28</td>
<td>53680.0</td>
<td>30360.0</td>
<td>3200.0</td>
<td>1314489600</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>28</td>
<td>59</td>
<td>240</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">34</td>
<td>Cross Country Race</td>
<td>2011-09-04</td>
<td>38360.0</td>
<td>88280.0</td>
<td>21170.0</td>
<td>1315094400</td>
<td>2011</td>
<td>2011</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>4</td>
<td>66</td>
<td>247</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>am</td>
</tr>
</tbody>
</table>

<p>10 rows × 34 columns</p>
</div>
</div>
</div>
<p>We can quickly get a sense of what features were just created using <code>tk.glimpse</code>.</p>
<div class="cell" data-execution_count="13">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df_with_datefeatures.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 341 rows of 34 columns
category_2:               object            ['Cross Country Race', 'Cros ...
order_date:               datetime64[ns]    [Timestamp('2011-07-03 00:00 ...
total_price_sum:          float64           [56430.0, 62320.0, 141620.0, ...
total_price_sum_lag_12:   float64           [85910.0, 138230.0, 138350.0 ...
total_price_sum_lag_24:   float64           [61750.0, 25050.0, 56860.0,  ...
order_date_index_num:     int64             [1309651200, 1310256000, 131 ...
order_date_year:          int64             [2011, 2011, 2011, 2011, 201 ...
order_date_year_iso:      UInt32            [2011, 2011, 2011, 2011, 201 ...
order_date_yearstart:     uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_yearend:       uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_leapyear:      uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_half:          int64             [2, 2, 2, 2, 2, 2, 2, 2, 2,  ...
order_date_quarter:       int64             [3, 3, 3, 3, 3, 3, 3, 3, 3,  ...
order_date_quarteryear:   object            ['2011Q3', '2011Q3', '2011Q3 ...
order_date_quarterstart:  uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_quarterend:    uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_month:         int64             [7, 7, 7, 7, 7, 8, 8, 8, 8,  ...
order_date_month_lbl:     object            ['July', 'July', 'July', 'Ju ...
order_date_monthstart:    uint8             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_monthend:      uint8             [0, 0, 0, 0, 1, 0, 0, 0, 0,  ...
order_date_yweek:         UInt32            [26, 27, 28, 29, 30, 31, 32, ...
order_date_mweek:         int64             [1, 2, 3, 4, 5, 1, 2, 3, 4,  ...
order_date_wday:          int64             [7, 7, 7, 7, 7, 7, 7, 7, 7,  ...
order_date_wday_lbl:      object            ['Sunday', 'Sunday', 'Sunday ...
order_date_mday:          int64             [3, 10, 17, 24, 31, 7, 14, 2 ...
order_date_qday:          int64             [3, 10, 17, 24, 31, 38, 45,  ...
order_date_yday:          int64             [184, 191, 198, 205, 212, 21 ...
order_date_weekend:       int64             [1, 1, 1, 1, 1, 1, 1, 1, 1,  ...
order_date_hour:          int64             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_minute:        int64             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_second:        int64             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_msecond:       int64             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_nsecond:       int64             [0, 0, 0, 0, 0, 0, 0, 0, 0,  ...
order_date_am_pm:         object            ['am', 'am', 'am', 'am', 'am ...</code></pre>
</div>
</div>
<p>Let’s subset to just a few of the relevant date features. Let’s use <code>tk.glimpse</code> again.</p>
<div class="cell" data-execution_count="14">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df_with_datefeatures_narrom <span class="op">=</span> df_with_datefeatures[[</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'order_date'</span>, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'category_2'</span>, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'total_price_sum'</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'total_price_sum_lag_12'</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'total_price_sum_lag_24'</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'order_date_year'</span>,  </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'order_date_half'</span>, </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'order_date_quarter'</span>,      </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'order_date_month'</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'order_date_yweek'</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>]]</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>df_with_datefeatures_narrom.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 341 rows of 10 columns
order_date:              datetime64[ns]    [Timestamp('2011-07-03 00:00: ...
category_2:              object            ['Cross Country Race', 'Cross ...
total_price_sum:         float64           [56430.0, 62320.0, 141620.0,  ...
total_price_sum_lag_12:  float64           [85910.0, 138230.0, 138350.0, ...
total_price_sum_lag_24:  float64           [61750.0, 25050.0, 56860.0, 8 ...
order_date_year:         int64             [2011, 2011, 2011, 2011, 2011 ...
order_date_half:         int64             [2, 2, 2, 2, 2, 2, 2, 2, 2, 2 ...
order_date_quarter:      int64             [3, 3, 3, 3, 3, 3, 3, 3, 3, 3 ...
order_date_month:        int64             [7, 7, 7, 7, 7, 8, 8, 8, 8, 9 ...
order_date_yweek:        UInt32            [26, 27, 28, 29, 30, 31, 32,  ...</code></pre>
</div>
</div>
<section id="one-hot-encoding" class="level3">
<h3 class="anchored" data-anchor-id="one-hot-encoding">One-Hot Encoding</h3>
<p>The final phase in our feature engineering journey is one-hot encoding our categorical variables. While certain machine learning models like CatBoost can natively handle categorical data, many cannot. Enter one-hot encoding, a technique that transforms each category within a column into its separate column, marking its presence with a ‘1’ or absence with a ‘0’.</p>
<p>For this transformation, the handy <code>pd.get_dummies()</code> function from pandas comes to the rescue.</p>
<div class="cell" data-execution_count="15">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df_encoded <span class="op">=</span> pd.get_dummies(df_with_datefeatures_narrom, columns<span class="op">=</span>[<span class="st">'category_2'</span>])</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>df_encoded.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 341 rows of 18 columns
order_date:                     datetime64[ns]    [Timestamp('2011-07-03 ...
total_price_sum:                float64           [56430.0, 62320.0, 141 ...
total_price_sum_lag_12:         float64           [85910.0, 138230.0, 13 ...
total_price_sum_lag_24:         float64           [61750.0, 25050.0, 568 ...
order_date_year:                int64             [2011, 2011, 2011, 201 ...
order_date_half:                int64             [2, 2, 2, 2, 2, 2, 2,  ...
order_date_quarter:             int64             [3, 3, 3, 3, 3, 3, 3,  ...
order_date_month:               int64             [7, 7, 7, 7, 7, 8, 8,  ...
order_date_yweek:               UInt32            [26, 27, 28, 29, 30, 3 ...
category_2_Cross Country Race:  uint8             [1, 1, 1, 1, 1, 1, 1,  ...
category_2_Cyclocross:          uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Elite Road:          uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Endurance Road:      uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Fat Bike:            uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Over Mountain:       uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Sport:               uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Trail:               uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Triathalon:          uint8             [0, 0, 0, 0, 0, 0, 0,  ...</code></pre>
</div>
</div>
</section>
<section id="training-and-future-feature-sets" class="level3">
<h3 class="anchored" data-anchor-id="training-and-future-feature-sets">Training and Future Feature Sets</h3>
<p>Pytimetk offers an extensive array of feature engineering tools and augmentation functions, giving you a broad spectrum of possibilities. However, for the purposes of this tutorial, let’s shift our focus to modeling.</p>
<p>Let’s proceed by segmenting our dataframe into training and future sets.</p>
<div class="cell" data-execution_count="16">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>future <span class="op">=</span> df_encoded[df_encoded.total_price_sum.isnull()]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>train <span class="op">=</span> df_encoded[df_encoded.total_price_sum.notnull()]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s focus on the columns essential for training. You’ll observe that we’ve excluded the ‘order_date’ column. This is because numerous machine learning models struggle with date data types. This is precisely why we utilized the <code>tk.augment_timeseries_signature</code> earlier—to transform date features into a format that’s compatible with ML models.</p>
<p>We can quickly see what features we have available with <code>tk.glimpse()</code>.</p>
<div class="cell" data-execution_count="17">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>train.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;: 233 rows of 18 columns
order_date:                     datetime64[ns]    [Timestamp('2011-07-03 ...
total_price_sum:                float64           [56430.0, 62320.0, 141 ...
total_price_sum_lag_12:         float64           [85910.0, 138230.0, 13 ...
total_price_sum_lag_24:         float64           [61750.0, 25050.0, 568 ...
order_date_year:                int64             [2011, 2011, 2011, 201 ...
order_date_half:                int64             [2, 2, 2, 2, 2, 2, 2,  ...
order_date_quarter:             int64             [3, 3, 3, 3, 3, 3, 3,  ...
order_date_month:               int64             [7, 7, 7, 7, 7, 8, 8,  ...
order_date_yweek:               UInt32            [26, 27, 28, 29, 30, 3 ...
category_2_Cross Country Race:  uint8             [1, 1, 1, 1, 1, 1, 1,  ...
category_2_Cyclocross:          uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Elite Road:          uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Endurance Road:      uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Fat Bike:            uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Over Mountain:       uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Sport:               uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Trail:               uint8             [0, 0, 0, 0, 0, 0, 0,  ...
category_2_Triathalon:          uint8             [0, 0, 0, 0, 0, 0, 0,  ...</code></pre>
</div>
</div>
</section>
</section>
<section id="scikit-learn-model" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="scikit-learn-model"><span class="header-section-number">3.5</span> Scikit Learn Model</h2>
<p>Now for some machine learning.</p>
<section id="fitting-a-random-forest-regressor" class="level3">
<h3 class="anchored" data-anchor-id="fitting-a-random-forest-regressor">Fitting a Random Forest Regressor</h3>
<p>Let’s create a <code>RandomForestRegressor</code> to predict future sales patterns.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>train_columns <span class="op">=</span> [ <span class="st">'total_price_sum_lag_12'</span>,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>       <span class="st">'total_price_sum_lag_24'</span>, <span class="st">'order_date_year'</span>, <span class="st">'order_date_half'</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">'order_date_quarter'</span>, <span class="st">'order_date_month'</span>, <span class="st">'order_date_yweek'</span>,<span class="st">'category_2_Cross Country Race'</span>, <span class="st">'category_2_Cyclocross'</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">'category_2_Elite Road'</span>, <span class="st">'category_2_Endurance Road'</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">'category_2_Fat Bike'</span>, <span class="st">'category_2_Over Mountain'</span>, <span class="st">'category_2_Sport'</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">'category_2_Trail'</span>, <span class="st">'category_2_Triathalon'</span>]</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> train[train_columns]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> train[[<span class="st">'total_price_sum'</span>]]</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> RandomForestRegressor(random_state<span class="op">=</span><span class="dv">123</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> model.fit(X, y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="prediction" class="level3">
<h3 class="anchored" data-anchor-id="prediction">Prediction</h3>
<p>We now have a fitted model, and can use this to predict sales from our future frame.</p>
<div class="cell" data-execution_count="19">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>predicted_values <span class="op">=</span> model.predict(future[train_columns])</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>future[<span class="st">'y_pred'</span>] <span class="op">=</span> predicted_values</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>future.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_12</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_24</th>
<th data-quarto-table-cell-role="th">order_date_year</th>
<th data-quarto-table-cell-role="th">order_date_half</th>
<th data-quarto-table-cell-role="th">order_date_quarter</th>
<th data-quarto-table-cell-role="th">order_date_month</th>
<th data-quarto-table-cell-role="th">order_date_yweek</th>
<th data-quarto-table-cell-role="th">category_2_Cross Country Race</th>
<th data-quarto-table-cell-role="th">category_2_Cyclocross</th>
<th data-quarto-table-cell-role="th">category_2_Elite Road</th>
<th data-quarto-table-cell-role="th">category_2_Endurance Road</th>
<th data-quarto-table-cell-role="th">category_2_Fat Bike</th>
<th data-quarto-table-cell-role="th">category_2_Over Mountain</th>
<th data-quarto-table-cell-role="th">category_2_Sport</th>
<th data-quarto-table-cell-role="th">category_2_Trail</th>
<th data-quarto-table-cell-role="th">category_2_Triathalon</th>
<th data-quarto-table-cell-role="th">y_pred</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">468</td>
<td>2012-01-08</td>
<td>NaN</td>
<td>51820.0</td>
<td>75720.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>59462.00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">469</td>
<td>2012-01-15</td>
<td>NaN</td>
<td>62940.0</td>
<td>21240.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>59149.45</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">470</td>
<td>2012-01-22</td>
<td>NaN</td>
<td>9060.0</td>
<td>11620.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>3</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>20458.40</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">471</td>
<td>2012-01-29</td>
<td>NaN</td>
<td>15980.0</td>
<td>9730.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>4</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>31914.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">472</td>
<td>2012-02-05</td>
<td>NaN</td>
<td>59180.0</td>
<td>22780.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>5</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>59128.95</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">473</td>
<td>2012-02-12</td>
<td>NaN</td>
<td>132550.0</td>
<td>53680.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>6</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>76397.50</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">474</td>
<td>2012-02-19</td>
<td>NaN</td>
<td>68430.0</td>
<td>38360.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>7</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>63497.80</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">475</td>
<td>2012-02-26</td>
<td>NaN</td>
<td>29470.0</td>
<td>90290.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>8</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>57332.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">476</td>
<td>2012-03-04</td>
<td>NaN</td>
<td>71080.0</td>
<td>7380.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>3</td>
<td>9</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>60981.30</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">477</td>
<td>2012-03-11</td>
<td>NaN</td>
<td>9800.0</td>
<td>0.0</td>
<td>2012</td>
<td>1</td>
<td>1</td>
<td>3</td>
<td>10</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>18738.15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="cleaning-up" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-up">Cleaning Up</h3>
<p>Now let us do a little cleanup. For ease in plotting later, let’s add a column to track the actuals vs.&nbsp;the predicted values.</p>
<div class="cell" data-execution_count="20">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>train[<span class="st">'type'</span>] <span class="op">=</span> <span class="st">'actuals'</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>future[<span class="st">'type'</span>] <span class="op">=</span> <span class="st">'prediction'</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>full_df <span class="op">=</span> pd.concat([train, future])</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>full_df.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_12</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_24</th>
<th data-quarto-table-cell-role="th">order_date_year</th>
<th data-quarto-table-cell-role="th">order_date_half</th>
<th data-quarto-table-cell-role="th">order_date_quarter</th>
<th data-quarto-table-cell-role="th">order_date_month</th>
<th data-quarto-table-cell-role="th">order_date_yweek</th>
<th data-quarto-table-cell-role="th">category_2_Cross Country Race</th>
<th data-quarto-table-cell-role="th">category_2_Cyclocross</th>
<th data-quarto-table-cell-role="th">category_2_Elite Road</th>
<th data-quarto-table-cell-role="th">category_2_Endurance Road</th>
<th data-quarto-table-cell-role="th">category_2_Fat Bike</th>
<th data-quarto-table-cell-role="th">category_2_Over Mountain</th>
<th data-quarto-table-cell-role="th">category_2_Sport</th>
<th data-quarto-table-cell-role="th">category_2_Trail</th>
<th data-quarto-table-cell-role="th">category_2_Triathalon</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">y_pred</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>2011-07-03</td>
<td>56430.0</td>
<td>85910.0</td>
<td>61750.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>26</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>2011-07-10</td>
<td>62320.0</td>
<td>138230.0</td>
<td>25050.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>27</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>2011-07-17</td>
<td>141620.0</td>
<td>138350.0</td>
<td>56860.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>28</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>2011-07-24</td>
<td>75720.0</td>
<td>136090.0</td>
<td>8740.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>29</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>2011-07-31</td>
<td>21240.0</td>
<td>32110.0</td>
<td>78070.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>30</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>2011-08-07</td>
<td>11620.0</td>
<td>139010.0</td>
<td>115010.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>31</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>2011-08-14</td>
<td>9730.0</td>
<td>2060.0</td>
<td>64290.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>32</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>2011-08-21</td>
<td>22780.0</td>
<td>26130.0</td>
<td>95070.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>33</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>2011-08-28</td>
<td>53680.0</td>
<td>30360.0</td>
<td>3200.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>34</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">34</td>
<td>2011-09-04</td>
<td>38360.0</td>
<td>88280.0</td>
<td>21170.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>9</td>
<td>35</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>actuals</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You can get the grouping category back from the one-hot encoding for easier plotting. For simplicity, we will search for any column with ‘category’ in its name.</p>
<div class="cell" data-execution_count="21">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract dummy columns</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>dummy_cols <span class="op">=</span> [col <span class="cf">for</span> col <span class="kw">in</span> full_df.columns <span class="cf">if</span> <span class="st">'category'</span> <span class="kw">in</span> col.lower() ]</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>full_df_reverted <span class="op">=</span> full_df.copy()</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert dummy columns back to categorical column</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>full_df_reverted[<span class="st">'category'</span>] <span class="op">=</span> full_df_reverted[dummy_cols].idxmax(axis<span class="op">=</span><span class="dv">1</span>).<span class="bu">str</span>.replace(<span class="st">"A_"</span>, <span class="st">""</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop dummy columns</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>full_df_reverted <span class="op">=</span> full_df_reverted.drop(columns<span class="op">=</span>dummy_cols)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>full_df_reverted.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_12</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_24</th>
<th data-quarto-table-cell-role="th">order_date_year</th>
<th data-quarto-table-cell-role="th">order_date_half</th>
<th data-quarto-table-cell-role="th">order_date_quarter</th>
<th data-quarto-table-cell-role="th">order_date_month</th>
<th data-quarto-table-cell-role="th">order_date_yweek</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">y_pred</th>
<th data-quarto-table-cell-role="th">category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>2011-07-03</td>
<td>56430.0</td>
<td>85910.0</td>
<td>61750.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>26</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>2011-07-10</td>
<td>62320.0</td>
<td>138230.0</td>
<td>25050.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>27</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>2011-07-17</td>
<td>141620.0</td>
<td>138350.0</td>
<td>56860.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>28</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>2011-07-24</td>
<td>75720.0</td>
<td>136090.0</td>
<td>8740.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>29</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>2011-07-31</td>
<td>21240.0</td>
<td>32110.0</td>
<td>78070.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>30</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>2011-08-07</td>
<td>11620.0</td>
<td>139010.0</td>
<td>115010.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>31</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>2011-08-14</td>
<td>9730.0</td>
<td>2060.0</td>
<td>64290.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>32</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>2011-08-21</td>
<td>22780.0</td>
<td>26130.0</td>
<td>95070.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>33</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>2011-08-28</td>
<td>53680.0</td>
<td>30360.0</td>
<td>3200.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>34</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">34</td>
<td>2011-09-04</td>
<td>38360.0</td>
<td>88280.0</td>
<td>21170.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>9</td>
<td>35</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="pre-visualization-wrangling" class="level3">
<h3 class="anchored" data-anchor-id="pre-visualization-wrangling">Pre-Visualization Wrangling</h3>
<p>Before we proceed to visualization, let’s streamline our dataset by aligning our predicted values with the actuals. This approach will simplify the plotting process. Given that our DataFrame columns are already labeled as ‘actuals’ and ‘predictions’, a brief conditional check will allow us to consolidate the necessary values.</p>
<div class="cell" data-execution_count="22">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>full_df_reverted[<span class="st">'total_price_sum'</span>] <span class="op">=</span> np.where(full_df_reverted.<span class="bu">type</span> <span class="op">==</span><span class="st">'actuals'</span>, full_df_reverted.total_price_sum, full_df_reverted.y_pred)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>full_df_reverted.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">order_date</th>
<th data-quarto-table-cell-role="th">total_price_sum</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_12</th>
<th data-quarto-table-cell-role="th">total_price_sum_lag_24</th>
<th data-quarto-table-cell-role="th">order_date_year</th>
<th data-quarto-table-cell-role="th">order_date_half</th>
<th data-quarto-table-cell-role="th">order_date_quarter</th>
<th data-quarto-table-cell-role="th">order_date_month</th>
<th data-quarto-table-cell-role="th">order_date_yweek</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">y_pred</th>
<th data-quarto-table-cell-role="th">category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">25</td>
<td>2011-07-03</td>
<td>56430.0</td>
<td>85910.0</td>
<td>61750.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>26</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">26</td>
<td>2011-07-10</td>
<td>62320.0</td>
<td>138230.0</td>
<td>25050.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>27</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>2011-07-17</td>
<td>141620.0</td>
<td>138350.0</td>
<td>56860.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>28</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>2011-07-24</td>
<td>75720.0</td>
<td>136090.0</td>
<td>8740.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>29</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>2011-07-31</td>
<td>21240.0</td>
<td>32110.0</td>
<td>78070.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>7</td>
<td>30</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>2011-08-07</td>
<td>11620.0</td>
<td>139010.0</td>
<td>115010.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>31</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>2011-08-14</td>
<td>9730.0</td>
<td>2060.0</td>
<td>64290.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>32</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>2011-08-21</td>
<td>22780.0</td>
<td>26130.0</td>
<td>95070.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>33</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>2011-08-28</td>
<td>53680.0</td>
<td>30360.0</td>
<td>3200.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>8</td>
<td>34</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">34</td>
<td>2011-09-04</td>
<td>38360.0</td>
<td>88280.0</td>
<td>21170.0</td>
<td>2011</td>
<td>2</td>
<td>3</td>
<td>9</td>
<td>35</td>
<td>actuals</td>
<td>NaN</td>
<td>category_2_Cross Country Race</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="visualize-the-forecast" class="level3">
<h3 class="anchored" data-anchor-id="visualize-the-forecast">Visualize the Forecast</h3>
<p>Let’s again use <code>tk.plot_timeseries()</code> to visually inspect the forecasts.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-groups="bbands-plotly-plotnine">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Plotly</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Plotnine</a></li></ul>
<div class="tab-content" data-groups="bbands-plotly-plotnine">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-execution_count="23">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>full_df_reverted <span class="op">\</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category'</span>) <span class="op">\</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    .plot_timeseries(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>        value_column <span class="op">=</span> <span class="st">'total_price_sum'</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>        color_column <span class="op">=</span> <span class="st">'type'</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>        smooth <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        smooth_alpha <span class="op">=</span> <span class="dv">0</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>        facet_ncol <span class="op">=</span> <span class="dv">2</span>,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>        facet_scales <span class="op">=</span> <span class="st">"free"</span>,</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>        y_intercept_color <span class="op">=</span> tk.palette_timetk()[<span class="st">'steel_blue'</span>],</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>        width <span class="op">=</span> <span class="dv">800</span>,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        height <span class="op">=</span> <span class="dv">600</span>,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>        engine <span class="op">=</span> <span class="st">'plotly'</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">

<div>                            <div id="895ee2a2-f951-49d2-8a86-de2d0dd9d4c7" class="plotly-graph-div" style="height:600px; width:800px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("895ee2a2-f951-49d2-8a86-de2d0dd9d4c7")) {                    Plotly.newPlot(                        "895ee2a2-f951-49d2-8a86-de2d0dd9d4c7",                        [{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[56430.0,62320.0,141620.0,75720.0,21240.0,11620.0,9730.0,22780.0,53680.0,38360.0,90290.0,7380.0,0.0,68630.0,59840.0,51820.0,62940.0,9060.0,15980.0,59180.0,132550.0,68430.0,29470.0,71080.0,9800.0,41620.0,2340.0],"type":"scatter","xaxis":"x","yaxis":"y","hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00","2012-03-25T00:00:00"],"y":[59462.0,59149.45,20458.4,31914.0,59128.95,76397.5,63497.8,57332.0,60981.3,18738.15,58561.3,26355.05],"type":"scatter","xaxis":"x","yaxis":"y","hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[11410.0,1960.0,10150.0,4200.0,0.0,5250.0,1960.0,0.0,29050.0,21000.0,8960.0,10080.0,0.0,1750.0,3500.0,7910.0,9380.0,7910.0,0.0,1750.0,9380.0,4410.0,0.0,10780.0,0.0,4200.0],"type":"scatter","xaxis":"x2","yaxis":"y2","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-01T00:00:00","2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00"],"y":[6331.4,10712.4,10379.6,9582.8,8551.35,8184.9,17575.0,16490.4,8193.6,8195.25,8365.85,9464.35],"type":"scatter","xaxis":"x2","yaxis":"y2","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[98950.0,28410.0,107580.0,60920.0,40320.0,17760.0,39090.0,14730.0,56195.0,0.0,64500.0,90060.0,12790.0,31845.0,35575.0,24880.0,62150.0,25680.0,9110.0,24780.0,75460.0,42415.0,34605.0,50560.0,12270.0,21075.0],"type":"scatter","xaxis":"x3","yaxis":"y3","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-01T00:00:00","2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00"],"y":[33540.95,67492.35,63792.05,53176.05,42986.0,53026.25,68516.6,59784.2,74374.0,61375.2,30771.65,50514.35],"type":"scatter","xaxis":"x3","yaxis":"y3","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[50550.0,49770.0,53170.0,24750.0,14910.0,44940.0,25020.0,3090.0,37350.0,4800.0,75510.0,24230.0,9590.0,33330.0,11610.0,26660.0,57970.0,7910.0,11830.0,15080.0,104560.0,28760.0,49700.0,17830.0,7540.0,30750.0,7110.0],"type":"scatter","xaxis":"x4","yaxis":"y4","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00","2012-03-25T00:00:00"],"y":[45622.0,51703.3,36437.3,29540.95,30378.5,56480.9,35766.8,54902.8,39865.9,21908.8,46647.9,26882.2],"type":"scatter","xaxis":"x4","yaxis":"y4","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00"],"y":[2130.0,0.0,0.0,2130.0,0.0,5860.0,3730.0,2130.0,0.0,2130.0,2130.0,2130.0,2130.0,0.0,0.0,0.0,2130.0,4260.0,4260.0,0.0,7460.0],"type":"scatter","xaxis":"x5","yaxis":"y5","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00","2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00"],"y":[3341.35,6292.1,6184.35,6742.4,6746.3,6746.3,6465.45,6917.85,7674.55,8097.75,6465.45,8211.95],"type":"scatter","xaxis":"x5","yaxis":"y5","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-06-26T00:00:00","2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[61480.0,58700.0,40820.0,91020.0,48380.0,7990.0,36670.0,30370.0,7990.0,7990.0,11720.0,19290.0,6400.0,7990.0,54480.0,21310.0,7680.0,24300.0,8200.0,0.0,0.0,61620.0,24620.0,27720.0,9800.0,6400.0,59330.0],"type":"scatter","xaxis":"x6","yaxis":"y6","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-01T00:00:00","2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00"],"y":[16690.7,32137.6,26394.75,29897.5,24783.65,17181.3,62145.5,29781.4,39591.4,13037.35,16937.4,66253.9],"type":"scatter","xaxis":"x6","yaxis":"y6","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[11480.0,6045.0,14640.0,7985.0,0.0,3770.0,5740.0,2150.0,3415.0,1065.0,8190.0,3940.0,1350.0,8800.0,1350.0,14320.0,5445.0,980.0,1630.0,2980.0,3825.0,7890.0,0.0,8320.0,0.0,14355.0],"type":"scatter","xaxis":"x7","yaxis":"y7","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-01T00:00:00","2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00"],"y":[11077.35,13304.9,9409.05,9217.2,8542.55,9327.95,9722.0,10324.75,8987.9,11407.9,9200.55,13222.7],"type":"scatter","xaxis":"x7","yaxis":"y7","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00","2012-01-01T00:00:00"],"y":[48800.0,103480.0,45210.0,65570.0,7460.0,45780.0,39020.0,3200.0,47510.0,5330.0,22830.0,18990.0,0.0,37820.0,32620.0,19420.0,28620.0,2340.0,11080.0,12250.0,45820.0,29360.0,27120.0,5650.0,13030.0,24210.0,2660.0],"type":"scatter","xaxis":"x8","yaxis":"y8","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00","2012-03-25T00:00:00"],"y":[43783.15,34772.7,33368.4,29006.15,24215.6,51290.1,35313.85,41435.3,24582.3,24288.0,41784.7,27216.3],"type":"scatter","xaxis":"x8","yaxis":"y8","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"actuals","line":{"color":"rgba(44, 62, 80, 1.0)","width":0.65},"mode":"lines","name":"actuals","x":["2011-07-03T00:00:00","2011-07-10T00:00:00","2011-07-17T00:00:00","2011-07-24T00:00:00","2011-07-31T00:00:00","2011-08-07T00:00:00","2011-08-14T00:00:00","2011-08-21T00:00:00","2011-08-28T00:00:00","2011-09-04T00:00:00","2011-09-11T00:00:00","2011-09-18T00:00:00","2011-09-25T00:00:00","2011-10-02T00:00:00","2011-10-09T00:00:00","2011-10-16T00:00:00","2011-10-23T00:00:00","2011-10-30T00:00:00","2011-11-06T00:00:00","2011-11-13T00:00:00","2011-11-20T00:00:00","2011-11-27T00:00:00","2011-12-04T00:00:00","2011-12-11T00:00:00","2011-12-18T00:00:00","2011-12-25T00:00:00"],"y":[28850.0,0.0,7350.0,23200.0,0.0,14350.0,21650.0,8100.0,0.0,0.0,12150.0,7850.0,0.0,5150.0,9600.0,4500.0,39000.0,4650.0,0.0,5900.0,39150.0,15350.0,3200.0,28350.0,2700.0,3900.0],"type":"scatter","xaxis":"x9","yaxis":"y9","showlegend":false,"hoverlabel":{"font":{"size":8.8}}},{"legendgroup":"prediction","line":{"color":"rgba(227, 26, 28, 1.0)","width":0.65},"mode":"lines","name":"prediction","x":["2012-01-01T00:00:00","2012-01-08T00:00:00","2012-01-15T00:00:00","2012-01-22T00:00:00","2012-01-29T00:00:00","2012-02-05T00:00:00","2012-02-12T00:00:00","2012-02-19T00:00:00","2012-02-26T00:00:00","2012-03-04T00:00:00","2012-03-11T00:00:00","2012-03-18T00:00:00"],"y":[9802.2,18269.0,40635.65,16159.0,17385.1,9790.6,40635.65,17778.15,12146.2,21241.75,9987.45,10106.9],"type":"scatter","xaxis":"x9","yaxis":"y9","showlegend":false,"hoverlabel":{"font":{"size":8.8}}}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,0.45],"title":{"text":""},"tickformat":"%b %Y","showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis":{"anchor":"x","domain":[0.88,1.0],"title":{"text":""},"tickfont":{"size":8.8}},"xaxis2":{"anchor":"y2","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis2":{"anchor":"x2","domain":[0.88,1.0],"tickfont":{"size":8.8}},"xaxis3":{"anchor":"y3","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis3":{"anchor":"x3","domain":[0.66,0.78],"tickfont":{"size":8.8}},"xaxis4":{"anchor":"y4","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis4":{"anchor":"x4","domain":[0.66,0.78],"tickfont":{"size":8.8}},"xaxis5":{"anchor":"y5","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis5":{"anchor":"x5","domain":[0.44,0.56],"tickfont":{"size":8.8}},"xaxis6":{"anchor":"y6","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis6":{"anchor":"x6","domain":[0.44,0.56],"tickfont":{"size":8.8}},"xaxis7":{"anchor":"y7","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis7":{"anchor":"x7","domain":[0.22,0.33999999999999997],"tickfont":{"size":8.8}},"xaxis8":{"anchor":"y8","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis8":{"anchor":"x8","domain":[0.22,0.33999999999999997],"tickfont":{"size":8.8}},"xaxis9":{"anchor":"y9","domain":[0.0,0.45],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis9":{"anchor":"x9","domain":[0.0,0.12],"tickfont":{"size":8.8}},"xaxis10":{"anchor":"y10","domain":[0.55,1.0],"showticklabels":true,"visible":true,"tickfont":{"size":8.8}},"yaxis10":{"anchor":"x10","domain":[0.0,0.12],"tickfont":{"size":8.8}},"annotations":[{"font":{"size":8.8},"showarrow":false,"text":"category_2_Cross Country Race","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Cyclocross","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Elite Road","x":0.225,"xanchor":"center","xref":"paper","y":0.78,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Endurance Road","x":0.775,"xanchor":"center","xref":"paper","y":0.78,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Fat Bike","x":0.225,"xanchor":"center","xref":"paper","y":0.56,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Over Mountain","x":0.775,"xanchor":"center","xref":"paper","y":0.56,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Sport","x":0.225,"xanchor":"center","xref":"paper","y":0.33999999999999997,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Trail","x":0.775,"xanchor":"center","xref":"paper","y":0.33999999999999997,"yanchor":"bottom","yref":"paper"},{"font":{"size":8.8},"showarrow":false,"text":"category_2_Triathalon","x":0.225,"xanchor":"center","xref":"paper","y":0.12,"yanchor":"bottom","yref":"paper"}],"legend":{"title":{"text":"Legend","font":{"size":8.8}},"font":{"size":8.8}},"title":{"text":"Time Series Plot","font":{"size":13.2}},"margin":{"l":10,"r":10,"t":40,"b":40},"font":{"size":11},"autosize":true,"width":800,"height":600},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('895ee2a2-f951-49d2-8a86-de2d0dd9d4c7');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-execution_count="24">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>full_df_reverted <span class="op">\</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'category'</span>) <span class="op">\</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    .plot_timeseries(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>        date_column <span class="op">=</span> <span class="st">'order_date'</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        value_column <span class="op">=</span> <span class="st">'total_price_sum'</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        color_column <span class="op">=</span> <span class="st">'type'</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        smooth <span class="op">=</span> <span class="va">False</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        smooth_alpha <span class="op">=</span> <span class="dv">0</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>        facet_ncol <span class="op">=</span> <span class="dv">2</span>,    </span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        facet_scales <span class="op">=</span> <span class="st">"free"</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        y_intercept_color <span class="op">=</span> tk.palette_timetk()[<span class="st">'steel_blue'</span>],</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>        width <span class="op">=</span> <span class="dv">1000</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        height <span class="op">=</span> <span class="dv">800</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>        engine <span class="op">=</span> <span class="st">'plotnine'</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="01_sales_crm_files/figure-html/cell-25-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>&lt;Figure Size: (1000 x 800)&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Upon examining the graph, our models look alright given the length of time for training. Important points:</p>
<ul>
<li>For effective time series forecasting, having multiple years of data is pivotal. This provides the model ample opportunities to recognize and adapt to seasonal variations.</li>
<li>Given our dataset spanned <em>less</em> than a year, the model lacked the depth of historical context to discern such patterns.</li>
<li>Although our feature engineering was kept basic to introduce various pytimetk capabilities, there’s room for enhancement.</li>
<li>For a more refined analysis, consider experimenting with different machine learning models and diving deeper into feature engineering.</li>
<li>Pytimetk’s <code>tk.augment_fourier()</code> might assist in discerning seasonal trends, but with the dataset’s limited historical scope, capturing intricate patterns could remain a challenge.</li>
</ul>
</section>
</section>
</section>
<section id="conclusions" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Conclusions</h1>
<p>This was a great example of how pytimetk can help Data Analysts and Data Scientists examine sales patterns from Customer Relationship Management (CRM) Databases.</p>
<ul>
<li>We examined ways to wrangle complex transactional data with <code>tk.summarize_by_time</code></li>
<li>We discovered how to visualize customer and product data with <code>tk.plot_timeseries</code></li>
<li>We used <code>tk.pad_by_time</code> and <code>tk.future_frame</code> to prepare data for modeling</li>
<li>And, we learned how to add many features with augment functions including <code>tk.augment_timeseries_signature</code> ant <code>tk.agument_lags</code></li>
</ul>
<p>All of these <code>pytimetk</code> skills and techniques were necessary to produce a good sales forecast with <code>sklearn</code>.</p>
</section>
<section id="more-coming-soon" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> More Coming Soon…</h1>
<p>We are in the early stages of development. But it’s obvious the potential for <code>pytimetk</code> now in Python. 🐍</p>
<ul>
<li>Please <a href="https://github.com/business-science/pytimetk">⭐ us on GitHub</a> (it takes 2-seconds and means a lot).</li>
<li>To make requests, please see our <a href="https://github.com/business-science/pytimetk/issues/2">Project Roadmap GH Issue #2</a>. You can make requests there.</li>
<li>Want to contribute? <a href="../contributing.html">See our contributing guide here.</a></li>
</ul>


</section>

</main> <!-- /main -->
<script type="application/vnd.jupyter.widget-state+json">
{"state":{"05d9e64877fb40f4ba6a48356534bbeb":{"model_module":"@jupyter-widgets/controls","model_module_version":"2.0.0","model_name":"HBoxModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"2.0.0","_model_name":"HBoxModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"2.0.0","_view_name":"HBoxView","box_style":"","children":["IPY_MODEL_8790c3be7e6247ab8bd525b3ebbe37fd","IPY_MODEL_4d24adc4b28f405491ccebca1b03ab8f","IPY_MODEL_3566ac43fb85401188d8d75a1e9f7d95"],"layout":"IPY_MODEL_1c06773d685d45cfa3c321fd8781fcfb","tabbable":null,"tooltip":null}},"141b5160cc7b46c785f2131567ff02bb":{"model_module":"@jupyter-widgets/controls","model_module_version":"2.0.0","model_name":"ProgressStyleModel","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"2.0.0","_model_name":"ProgressStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"StyleView","bar_color":null,"description_width":""}},"1c06773d685d45cfa3c321fd8781fcfb":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"282c922bcef74c8c9b5dd6baec06ae25":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"30704f2fb1564d3e94bb2a38f8883ec7":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"3566ac43fb85401188d8d75a1e9f7d95":{"model_module":"@jupyter-widgets/controls","model_module_version":"2.0.0","model_name":"HTMLModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"2.0.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"2.0.0","_view_name":"HTMLView","description":"","description_allow_html":false,"layout":"IPY_MODEL_d0aac40769544633bb72445d6b7b7f1e","placeholder":"​","style":"IPY_MODEL_fdd34d1ba33d4215add387ce62b96865","tabbable":null,"tooltip":null,"value":" 9/9 [00:00&lt;00:00, 265.48it/s]"}},"4d24adc4b28f405491ccebca1b03ab8f":{"model_module":"@jupyter-widgets/controls","model_module_version":"2.0.0","model_name":"FloatProgressModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"2.0.0","_model_name":"FloatProgressModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"2.0.0","_view_name":"ProgressView","bar_style":"success","description":"","description_allow_html":false,"layout":"IPY_MODEL_282c922bcef74c8c9b5dd6baec06ae25","max":9,"min":0,"orientation":"horizontal","style":"IPY_MODEL_141b5160cc7b46c785f2131567ff02bb","tabbable":null,"tooltip":null,"value":9}},"8790c3be7e6247ab8bd525b3ebbe37fd":{"model_module":"@jupyter-widgets/controls","model_module_version":"2.0.0","model_name":"HTMLModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"2.0.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"2.0.0","_view_name":"HTMLView","description":"","description_allow_html":false,"layout":"IPY_MODEL_30704f2fb1564d3e94bb2a38f8883ec7","placeholder":"​","style":"IPY_MODEL_91660d18cdfa4d31a1c647b490b57615","tabbable":null,"tooltip":null,"value":"Future framing...: 100%"}},"91660d18cdfa4d31a1c647b490b57615":{"model_module":"@jupyter-widgets/controls","model_module_version":"2.0.0","model_name":"HTMLStyleModel","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"2.0.0","_model_name":"HTMLStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"StyleView","background":null,"description_width":"","font_size":null,"text_color":null}},"d0aac40769544633bb72445d6b7b7f1e":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"fdd34d1ba33d4215add387ce62b96865":{"model_module":"@jupyter-widgets/controls","model_module_version":"2.0.0","model_name":"HTMLStyleModel","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"2.0.0","_model_name":"HTMLStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"StyleView","background":null,"description_width":"","font_size":null,"text_color":null}}},"version_major":2,"version_minor":0}
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../guides/06_anomalize.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Anomaly Detection</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../tutorials/02_finance.html" class="pagination-link">
        <span class="nav-page-text">Finance Analysis</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>